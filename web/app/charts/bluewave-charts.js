if(!bluewave)var bluewave={};bluewave.charts||(bluewave.charts={}),bluewave.charts.CalendarChart=function(a,c){var d,e,f=this,b={dayLabel:!0,yearLabel:!0,date:"date",value:"value",weekday:"monday",cellSize:17,colors:["#fff","#ebf5dc","#cbe9a5","#2a671a"],showTooltip:!1},g=function(){f.setConfig(c),k(a,function(a,b){d=a,e=b})};this.setConfig=function(a){c=a?i(a,b):b},this.getTooltipLabel=function(a){return d3.utcFormat("%m/%d/%Y")(a.date)+"<br/>"+d3.format(",")(a.value)},this.clear=function(){e&&e.selectAll("*").remove()},this.update=function(a,e){f.clear(),c=i(a,b);var g=d.node().parentNode;j(g,function(){h(e)})};var h=function(a){var b=c,g=c.cellSize,h=c.weekday,i=a=>"SMTWTFS"[a];a.forEach(a=>{var b=a[c.date],d=a[c.value];a[c.date]=new Date(b),a[c.value]=parseFloat(d)}),a.sort(function(d,a){return a[c.date].getTime()-d[c.date].getTime()});var j=[],k=[],o={};a.forEach(a=>{var b=a[c.date],d=a[c.value];j.push(b),k.push(d);var e=b.getUTCFullYear();o[e+""]=e}),o=Object.values(o),o.sort(function(c,a){return a-c});const p="sunday"===h?a=>a:a=>(a+6)%7,q="sunday"===h?d3.utcSunday:d3.utcMonday,r="weekday"===h?5:7;var s,t=n(k,10),u=m(t.length+1,c.colors),v=function(a){for(var b=0;b<t.length-1;b++){var c=t[b],d=t[b+1],e=u[b];if(a>=c&&a<d)return e;if(a==t[t.length-1])return u[u.length-1]}};!0===c.showTooltip&&(s=l());var w=function(a,b){if(s){var c=f.getTooltipLabel({date:a,value:k[b]});s.html(c).show()}d3.select(this).transition().duration(100).attr("opacity","0.8")},x=function(){var a=d3.event;s&&s.style("top",a.clientY+"px").style("left",a.clientX+20+"px")},y=function(){s&&s.hide(),d3.select(this).transition().duration(100).attr("opacity","1")},z=e.selectAll("*").data(o).join("g").attr("transform",(a,b)=>`translate(40.5,${g*(r+2)*b+1.5*g})`);b.yearLabel&&z.append("text").attr("class","chart-axis-label").attr("x",-5).attr("y",-5).attr("text-anchor","end").text(a=>a),b.dayLabel&&z.append("g").attr("class","tick").attr("text-anchor","middle").selectAll("text").data(function(a){var b=d3.range(7);return b.forEach(function(c,d){b[d]={day:c,year:a}}),b}).join("text").attr("x",-10).attr("y",function(a){return(p(a.day)+.5)*g}).attr("dy","0.31em").text(function(a){var b=a.day,c=a.year,d=!1;if(j.every(function(a){if(a.getUTCFullYear()===c){var e=a.getUTCDay();if(e===b)return d=!0,!1}return!0}),d||0<b&&6>b)return i(b)});z.append("g").selectAll("*").data(function(a){var b=[];return j.forEach(function(c){c.getUTCFullYear()===a&&b.push(c)}),b}).join("rect").attr("width",g-1).attr("height",g-1).attr("x",a=>q.count(d3.utcYear(a),a)*g+.5).attr("y",a=>p(a.getUTCDay())*g+.5).attr("fill",function(a,b){var c=k[b];return v(c)}).on("mouseover",w).on("mousemove",x).on("mouseleave",y);var A=z.append("g").selectAll("g").data(function(a){var b,c;return j.forEach(function(d){d.getUTCFullYear()===a&&(!c&&(c=d),b=d)}),b=new Date(b.getTime()),c=new Date(c.getTime()),b.setMonth(b.getMonth()-1),c.setMonth(c.getMonth()+1),d3.utcMonths(b,c)}).join("g");A.filter((a,b)=>b).append("path").attr("fill","none").attr("stroke","#fff").attr("stroke-width",3).attr("d",function(a){const b=Math.max(0,Math.min(r,p(a.getUTCDay()))),c=q.count(d3.utcYear(a),a);return`${0===b?`M${c*g},0`:b===r?`M${(c+1)*g},0`:`M${(c+1)*g},0V${b*g}H${c*g}`}V${r*g}`});var B={};A.append("text").attr("class","tick").attr("x",a=>q.count(d3.utcYear(a),q.ceil(a))*g+2).attr("y",-5).text(function(a){var b=d3.utcFormat("%b")(a),c=d3.utcFormat("%Y")(a),e=c+"-"+b,f=!1;if(j.every(function(a){var b=d3.utcFormat("%b")(a),c=d3.utcFormat("%Y")(a);return c+"-"+b!==e||(f=!0,!1)}),f&&!B[e])return B[e]=!0,b})},i=javaxt.dhtml.utils.merge,j=javaxt.dhtml.utils.onRender,k=bluewave.chart.utils.initChart,l=bluewave.chart.utils.createTooltip,m=bluewave.chart.utils.getColorRange,n=bluewave.chart.utils.getNaturalBreaks;g()};if(!bluewave)var bluewave={};bluewave.charts||(bluewave.charts={}),bluewave.charts.BarChart=function(a,b){var c,d,e,f,g,h,i,j=this,k={layout:"vertical",animationSteps:1500,stackValues:!1,colors:d3.schemeCategory10},l=[],m=function(){j.setConfig(b),s(a,function(a,b){c=a,d=b})};this.setConfig=function(a){b=a?q(a,k):k},this.getBarColor=function(a,c){var d=b.colors,e=b["barColor"+c];return e||(e=d[c%d.length],b["barColor"+c]=e),e},this.getTooltipLabel=function(a){return a.key+"<br/>"+a.value},this.getXAxis=function(){return h},this.getYAxis=function(){return i},this.clear=function(){d&&d.selectAll("*").remove()},this.addLine=function(a,b,c,d){l.push({line:a,data:b,xAxis:c+"",yAxis:d+""})},this.update=function(a,b){j.clear(),j.setConfig(a);var d=c.node().parentNode;r(d,function(){n(b,d)})};var n=function(a,c){var k=b,m=c.offsetWidth,n=c.offsetHeight,q=n,r=m;e=d.append("g"),e.attr("width",m).attr("height",n);var s,x,y=k.layout,z=!0===k.stackValues,A=k.barType;if("histogram"===A?(s=k.values,x=s):(s=k.xAxis,x=k.yAxis),null!==s&&void 0!==s&&null!==x&&void 0!==x){var B=a,C=d3.merge(B),D=d3.nest().key(function(a){return a[s]}).rollup(function(a){return d3.sum(a,function(a){return parseFloat(a[x])})}).entries(C);if(0<l.length){let a=d3.max(D,a=>parseFloat(a.value));l.forEach(function(b){let c=b.data,e=b.xAxis,f=b.yAxis,g=d3.max(c,a=>parseFloat(a[f]));g>a&&(D=d3.nest().key(function(a){return a[e]}).rollup(function(a){return d3.sum(a,function(a){return parseFloat(a[f])})}).entries(c))})}var E=k.sort;E&&D.sort(function(c,a){return d3[E](c.value,a.value)});var F=k.group;if(null!==F&&void 0!==F&&""!==F){var G=d3.nest().key(function(a){return a[F]}).entries(a[0]);z||(D=d3.nest().key(function(a){return a[s]}).rollup(function(a){return d3.max(a,function(a){return parseFloat(a[x])})}).entries(C));let b=[];G.forEach(function(a){b.push(a.values)}),B=b}else z=!1;var H=[];for(let a=0;a<B.length;a++){let b=k[`xAxis${a+1}`],c=k[`yAxis${a+1}`];if(b&&c||F||"histogram"===A||!(0<a)){k.hasOwnProperty(`xAxis${a+1}`)&&k.hasOwnProperty(`yAxis${a+1}`)&&(s=b,x=c);var I=d3.nest().key(function(a){return a[s]}).rollup(function(a){return d3.sum(a,function(a){return a[x]})}).entries(B[a]);H.push(I)}}var J,K,L,M;"histogram"===A?(L="key",M="key","vertical"===y?(J="Frequency",K=k.xAxis):"horizontal"===y&&(J=k.xAxis,K="Frequency")):"vertical"===y?(L="key",M="value",J=k.yAxis,K=k.xAxis):"horizontal"===y&&(L="value",M="key",J=k.xAxis,K=k.yAxis);var N=t(e,r,q,L,M,D,null,k,"barChart"),O=N.margin;if(O){var P=O.left,Q=O.right,R=O.top,S=O.bottom;(0<R||0<S||0<P||0<Q)&&(q-=R+S,r-=P+Q,e.selectAll("*").remove(),e.attr("transform","translate("+P+","+R+")"),N=t(e,r,q,L,M,D,null,k,"barChart")),O={top:R,right:Q,bottom:S,left:P}}f=N.x,g=N.y,h=N.xAxis,i=N.yAxis,n-=O.top+O.bottom,m-=O.left+O.right;var T={};for(let a=0;a<B.length;a++){var I=H[a];let b=parseFloat(k["fillOpacity"+a]);if((isNaN(b)||0>b||1<b)&&(b=1),z){let c=w(I[0].key);"date"==c&&(c="string");let h=function(a){return"date"===c?f(new Date(a.key)):f(a.key)},i=function(a){var b=parseFloat(a.value);return g(b)},j=function(a){return f.bandwidth?f.bandwidth():h(a)};e.append("g").selectAll("mybar").data(I).enter().append("rect").attr("x",h).attr("y",function(a){var b=a.key,c=a.value;T[b]||(T[b]=0);var d=parseFloat(c);return T[b]+=d,g(T[b])}).attr("height",function(a){return g.bandwidth?g.bandwidth():n-i(a)}).attr("width",function(a){return j(a)}).attr("opacity",b).attr("barID",a)}if(!z)if("histogram"===A){let c=parseInt(k.binWidth);(isNaN(c)||1>c)&&(c=10),f.nice();var U=d3.histogram().value(function(a){return a.key}).domain(f.domain()).thresholds(f.ticks(c)),V=U(I),W=d3.max(V,a=>a.length),X=d3.scaleLinear().range("vertical"===y?[n,0]:[0,m]);X.domain([0,W]),"vertical"===y?o(f,X,q):"horizontal"===y&&o(X,g,q),e.selectAll("rect").data(V).enter().append("rect").attr("x",function(a){return"vertical"===y?f(a.x0):0}).attr("y",function(a){return"vertical"===y?X(a.length):n-f(a.x1)/(m/n)}).attr("width",function(a){return"vertical"===y?f(a.x1)-f(a.x0)-.5:X(a.length)}).attr("height",function(a){return"vertical"===y?n-X(a.length):(f(a.x1)-f(a.x0))/(m/n)-.5}).attr("opacity",b).attr("barID",a)}else{let c=w(I[0].key);"date"==c&&(c="string");var Y=function(a){return"date"===c?f(new Date(a.key)):f(a.key)},Z=function(a){var b=parseFloat(a.value);return g(b)};if(!(g.bandwidth||f.bandwidth))"vertical"===k.layout?!F&&e.selectAll("mybar").data(I).enter().append("rect").attr("x",function(a){return Y(a)-m/I.length/2}).attr("y",Z).attr("height",function(a){return n-Z(a)}).attr("width",function(){return m/I.length-5}).attr("opacity",b).attr("barID",function(){return F?a:0}):"horizontal"===k.layout&&e.selectAll("mybar").data(I).enter().append("rect").attr("x",function(){return 0}).attr("y",function(a){return"date"===c?g(new Date(a.key))-n/I.length/2:g(a.key)-n/I.length/2}).attr("height",function(){return n/I.length-5}).attr("width",function(a){return f(a.value)}).attr("opacity",b).attr("barID",function(){return F?a:0});else if("vertical"===k.layout){var $=function(a){return F?f.bandwidth?f.bandwidth()/B.length:Y(a):f.bandwidth?f.bandwidth():Y(a)};e.selectAll("mybar").data(I).enter().append("rect").attr("x",function(b){var c=$(b),d=f.bandwidth?Y(b):0;return F?d+c*a:Y(b)}).attr("y",Z).attr("height",function(a){return g.bandwidth?g.bandwidth():n-Z(a)}).attr("width",function(a){return $(a)}).attr("opacity",b).attr("barID",function(){return F?a:0})}else"horizontal"===k.layout&&e.selectAll("mybar").data(I).enter().append("rect").attr("x",function(){return 0}).attr("y",function(b){var c=g.bandwidth?g.bandwidth()/B.length:n-g(b.key),d=g.bandwidth?g(b.key):0;return F?d+c*a:g(b.key)}).attr("height",function(a){return F?g.bandwidth?g.bandwidth()/B.length:n-g(a.value):g.bandwidth?g.bandwidth():n-g(a.value)}).attr("width",function(a){return f.bandwidth?f.bandwidth():f(a.value)}).attr("opacity",b).attr("barID",function(){return F?a:0})}}var _=function(a,b){for(var c=[],d=B[a],e=0;e<d.length;e++)d[e][s]===b.key&&c.push(d[e]);return c},aa=e.selectAll("rect");aa.each(function(a){let b=d3.select(this),c=parseInt(b.attr("barID"));var d=_(c,a);b.attr("fill",j.getBarColor(a,c,d))});var ba=k.animationSteps;!isNaN(ba)&&50<ba&&(aa.attr("yInitial",function(){return this.getAttribute("y")}).attr("heightInitial",function(){return this.getAttribute("height")}).attr("widthInitial",function(){return this.getAttribute("width")}),"vertical"===y?(aa.attr("y",n).attr("height",0),aa.transition().duration(ba).attr("y",function(){return parseFloat(this.getAttribute("yInitial"))}).attr("height",function(){return parseFloat(this.getAttribute("heightInitial"))})):"horizontal"===y&&(aa.attr("x",0).attr("width",0),aa.transition().duration(ba).attr("width",function(){return parseFloat(this.getAttribute("widthInitial"))})));var ca;!0===b.showTooltip&&(ca=u());var da=function(a){if(ca){let d=d3.select(this),e=parseInt(d.attr("barID"));var b=_(e,a),c=j.getTooltipLabel(a,e,b);ca.html(c).show()}d3.select(this).transition().duration(100).attr("opacity","0.8")},ea=function(){var a=d3.event;ca&&ca.style("top",a.clientY+"px").style("left",a.clientX+20+"px")},fa=function(){ca&&ca.hide(),d3.select(this).transition().duration(100).attr("opacity","1")},ga=function(){ba||(ba=0),setTimeout(function(){aa.on("mouseover",da),aa.on("mousemove",ea),aa.on("mouseleave",fa)},ba)},ha=function(){var a=[];return aa.each(function(){a.push(this)}),a};aa.on("click",function(a){var b=parseInt(d3.select(this).attr("barID"));j.onClick(this,b,a)}),aa.on("dblclick",function(){j.onDblClick(this,ha(this))}),l.forEach(function(a){p(a)}),(k.xGrid||k.yGrid)&&v(e,f,g,q,r,k.xGrid,k.yGrid),ga()}};this.onClick=function(){},this.onDblClick=function(){};var o=function(a,b,c){h&&h.selectAll("*").remove(),i&&i.selectAll("*").remove(),h=e.append("g").attr("transform","translate(0,"+c+")").call(d3.axisBottom(a)),h.selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),i=e.append("g").call(d3.axisLeft(b))},p=function(a){var b,c=a.xAxis,d=a.yAxis;a.line.getConfig&&(b=a.line.getConfig()),b||(b=new bluewave.chart.Line().getConfig());let h=b.color,i=b.style,j=b.width,k=b.opacity,l=b.smoothing;var m=function(a){var b=f.bandwidth()/2;return"date"===p?f(new Date(a.key))+b:f(a.key)+b},n=function(a){var b=parseFloat(a.value);return g(b)},o=d3.nest().key(function(a){return a[c]}).rollup(function(a){return d3.sum(a,function(a){return a[d]})}).entries(a.data);let p=w(o[0].key);"date"==p&&(p="string"),e.append("path").datum(o).attr("fill","none").attr("stroke",h).attr("stroke-width",j).attr("opacity",k).attr("stroke-dasharray",function(){if("dashed"===i)return"5, 5";return"dotted"===i?"0, 5":void 0}).attr("stroke-linecap",function(){if("dotted"===i)return"round"}).attr("d",function(){return l&&"none"!==l?d3.line().x(m).y(n).curve(d3[l]):d3.line().x(m).y(n)}())},q=javaxt.dhtml.utils.merge,r=javaxt.dhtml.utils.onRender,s=bluewave.chart.utils.initChart,t=bluewave.chart.utils.drawAxes,u=bluewave.chart.utils.createTooltip,v=bluewave.chart.utils.drawGridlines,w=bluewave.chart.utils.getType;m()};if(!bluewave)var bluewave={};bluewave.charts||(bluewave.charts={}),bluewave.charts.ScatterChart=function(a,b){var c,d,e,f,g,h,i=this,j={pointColor:"#6699cc",pointRadius:7,pointOpacity:.8,pointLabels:!1,showRegLine:!1},k=function(){i.setConfig(b),p(a,function(a,b){c=a,d=b})};this.setConfig=function(a){b=a?n(a,j):j},this.clear=function(){d&&d.selectAll("*").remove(),b=n({},j)},this.update=function(a,b){i.clear(),i.setConfig(a);var d=c.node().parentNode;o(d,function(){l(b,d)})},this.getPointLabel=function(){return""},this.getPointRadius=function(){return b.pointRadius},this.getPointColor=function(){return b.pointColor},this.getPointOpacity=function(){return b.pointOpacity},this.getTooltipLabel=function(a){return b.xAxis+": "+a[b.xAxis]+"<br/>"+b.yAxis+": "+a[b.yAxis]},this.onClick=function(){};var l=function(a,c){var j=Math.max,k=c.offsetWidth,l=c.offsetHeight,n=l,o=k;e=d.append("g"),e.attr("width",k).attr("height",l);let p=b.xAxis,r=b.yAxis;if(!p||!r)return;if(a=a[0],0==a.length)return;var t=s(e,o,n,p,r,a,null,b);g=t.x,h=t.y;var x=t.margin;if(x){var y=x.left,A=x.right,B=x.top,C=x.bottom,D=0;if(b.pointLabels){var E=e.append("g");E.selectAll("text").data(a).enter().append("text").attr("x",0).attr("y",0).attr("text-anchor","start").attr("font-size",10).text(function(a){return i.getPointLabel(a)});var F=E.node().getBBox();E.remove(),D=j(F.width,D)}(0<B||0<C||0<y||0<A)&&(n-=B+C,o-=y+A,e.selectAll("*").remove(),e.attr("transform","translate("+y+","+B+")"),t=s(e,o,n,p,r,a,null,b)),x={top:B,right:A,bottom:C,left:y}}g=t.x,h=t.y;let G=q(a[p]);if(b.pointLabels){let a=D/o;g=v({scale:t.x,band:t.xBand},[0,o],a).scale,w(e,t.xAxis,g,null,null,n)}(b.xGrid||b.yGrid)&&u(e,g,h,n,o,b.xGrid,b.yGrid);var H,I=function(a){return"date"===G?g(new Date(a[p])):g(a[p])},J=function(a){return h(a[r])};!0===b.showTooltip&&(H=z());var K=function(a){if(H){var b=i.getTooltipLabel(a);H.html(b).show()}d3.select(this).transition().duration(100).attr("opacity","0.8")},L=function(){var a=d3.event;H&&H.style("top",a.clientY+"px").style("left",a.clientX+20+"px")},M=function(){H&&H.hide(),d3.select(this).transition().duration(100).attr("opacity","1")},N=e.append("g");if(N.attr("name","points"),N.selectAll("*").data(a).enter().append("circle").attr("dataset",0).attr("cx",I).attr("cy",J).attr("r",function(a){return i.getPointRadius(a)}).style("fill",function(a){return i.getPointColor(a)}).style("opacity",function(a){return i.getPointOpacity(a)}).style("stroke","white").on("mouseover",K).on("mousemove",L).on("mouseleave",M).on("click",function(a){var b=parseInt(d3.select(this).attr("dataset"));i.onClick(this,b,a)}),!0===b.pointLabels){var O=e.append("g");O.attr("name","labels"),O.append("g").selectAll("text").data(a).enter().append("text").attr("x",function(a){var b=I(a),c=i.getPointRadius(a);return b+c+1}).attr("y",J).attr("font-size",10).text(function(a){return i.getPointLabel(a)}).on("mouseover",K).on("mousemove",L).on("mouseleave",M).on("click",function(){})}if(b.showRegLine){var P=m(a,p,r,d3.min(a,function(a){return a[p]}),d3.min(a,function(a){return a[r]}),g,h);f=d3.line().x(function(a){return a[0]}).y(function(a){return a[1]}),e.append("path").datum(P).attr("dataset",0).attr("d",f).attr("stroke",i.getPointColor()).attr("stroke-linecap","round").attr("stroke-width",2).on("click",function(a){var b=parseInt(d3.select(this).attr("dataset"));i.onClick(this,b,a)})}},m=function(a,c,d,e,f,g,h){var i=a.length,j=[],k=[],l=[];a.forEach(a=>{var b={};b.x=parseFloat(g(a[c])),b.y=parseFloat(h(a[d])),b.mult=b.x*b.y,j.push(b),k.push(parseFloat(g(a[c]))),l.push(parseFloat(h(a[d])))});var n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=k.length;if(u!=l.length)throw new Error("The values in xAxis and yAxis need to have same size!");if(0===u)return[[],[]];for(var w=0;w<u;w++)s=k[w],t=l[w],n+=s,o+=t,q+=s*s,p+=s*t,r++;for(var z=(r*p-n*o)/(r*q-n*n),m=o/r-z*n/r,b=[],w=0;w<u;w++)s=k[w],t=s*z+m,b.push([s,t]);return b},n=javaxt.dhtml.utils.merge,o=javaxt.dhtml.utils.onRender,p=bluewave.chart.utils.initChart,q=bluewave.chart.utils.getType,r=bluewave.chart.utils.getScale,s=bluewave.chart.utils.drawAxes,t=bluewave.chart.utils.drawLabels,u=bluewave.chart.utils.drawGridlines,v=bluewave.chart.utils.extendScale,w=bluewave.chart.utils.reDrawAxes,z=bluewave.chart.utils.createTooltip;k()};if(!bluewave)var bluewave={};bluewave.charts||(bluewave.charts={}),bluewave.charts.LineChart=function(a,c){var e,f,g,j,b,d=Math.max,h=this,i={xGrid:!1,yGrid:!1,scaling:"linear",stackValues:!1,endTags:!1,animationSteps:1500},k=[],l=function(){h.setConfig(c),v(a,function(a,b){e=a,f=b})};this.setConfig=function(a){c=a?t(a,i):i,h.setScaling(c.scaling)},this.setScaling=function(a){c.scaling="logarithmic"===a?"logarithmic":"linear"},this.displayEndTags=function(a){c.endTags=!(!0!==a)},this.clear=function(){m(),k=[]},this.update=function(){var a=e.node().parentNode;u(a,function(){n(a)})},this.addLine=function(a,b,c,d){k.push({line:a,data:b,xAxis:c+"",yAxis:d+""})},this.getLayers=function(){return k},this.setLayers=function(a){k=a};var m=function(){f&&f.selectAll("*").remove()},n=function(a){m();var e=c,l=k.map(a=>a.data);if(0!==l.length){var n=a.offsetWidth,s=a.offsetHeight,t=s,u=n;g=f.append("g"),g.attr("width",n).attr("height",s);var v=e.endTags;!0===v||!1===v||(v=1<l.length);var w=!0===e.stackValues,x=!0===e.accumulateValues,y=[];k.forEach(function(a){a.data&&a.data.forEach(function(b){for(var c=b[a.xAxis],d=!0,e=0;e<y.length;e++)if(y[e]==c){d=!1;break}d&&y.push(c)})});var C=[];for(let a=0;a<k.length;a++){if(!k[a].line)continue;let b=k[a].xAxis,c=k[a].yAxis;if(b&&c){var D=d3.nest().key(function(a){return a[b]}).rollup(function(a){return d3.sum(a,function(a){return a[c]})}).entries(k[a].data),E=k[a].line.getConfig();x&&D.forEach(function(a,b){var c=D[b].value;isNaN(c)&&(D[b].value=0),0<b&&(D[b].value+=D[b-1].value)});var F=E.smoothing;if(F){var G=E.smoothingValue;r(F,G,D)}C.push({lineConfig:E,sumData:D})}}if(w){if(x)C.sort(function(c,d){return c=c.sumData,c=c[c.length-1].value,d=d.sumData,d=d[d.length-1].value,d-c});else{var H=[];C.forEach(function(a){var b=a.sumData,c=0;b.forEach(a=>c+=a.value),H.push({sumValue:c,sumData:b,lineConfig:a.lineConfig})}),H.sort(function(c,a){return a.sumValue-c.sumValue}),C=[],H.forEach(a=>C.push({sumData:a.sumData,lineConfig:a.lineConfig}))}var I=z(y),J={};C.forEach(function(a,b){var c=a.sumData,d="none",e=0,f=0,g=0;if(2>c.length);else{for(var h=0;h<c.length-1;h++){var i=c[h].key,k=c[h+1].key;if("date"==I)i=new Date(i).getTime(),k=new Date(k).getTime(),k>=i&&e++,k<=i&&f++;else if("number"==I)i=parseFloat(i),k=parseFloat(k),k>i&&e++,k<i&&f++,k==i&&g++;else{var l=i.localeCompare(k);0>l&&e++,0<l&&f++,0==l&&g++}}e+g==c.length-1&&(d="asc"),f+g==c.length-1&&(d="desc");var m=J[d];m||(m=[],J[d]=m),m.push(b)}});var K=Object.keys(J),L=1==K.length?K[0]:null;L&&y.sort(function(c,a){return"number"==I?"asc"==L?parseFloat(c)-parseFloat(a):parseFloat(a)-parseFloat(c):"date"==I?"asc"==L?new Date(c).getTime()-new Date(a).getTime():new Date(a).getTime()-new Date(c).getTime():"asc"==L?c.localeCompare(a):a.localeCompare(c)}),C.forEach(function(a){var b=a.sumData,c=[];for(y.forEach(function(a){for(var d,e=0;e<b.length;e++){var f=b[e].key,g=b[e].value;if(f==a){d=g;break}}c.push({key:a,value:d})});0<c.length;){var d=c[0].value;if(!isNaN(d))break;isNaN(d)&&c.shift()}a.sumData=c});var M=[];C.forEach(function(a){var b=a.sumData,c=[];b.forEach(function(a){c.push({key:a.key,value:a.value})}),b.forEach(function(a,d){var e=a.key,f=a.value;if(isNaN(f)){for(var g,h=d-1;-1<h;h--)if(g=b[h].value,!isNaN(g)){f=g;break}isNaN(f)&&(f=0)}for(var i,k,l=0;l<M.length;l++)k=M[l].sumData,k.every(function(a){var b=a.key,c=a.value;return!!(b!=e||isNaN(c))||(i=c,!1)});isNaN(i)||(f+=i),c[d].value=f}),M.push({lineConfig:a.lineConfig,sumData:c})}),C=M}var N=[],O=[];C.forEach(function(b){var a=b.sumData;y.forEach(function(b){var c=Math.min;b instanceof Date&&!w&&(b+="");for(var e=0;e<a.length;e++){var f=a[e],g=f.key;if(g===b){for(var h,k=f.value,l=!1,m=0;m<N.length;m++)h=N[m],h.key==b&&(l=!0,h.value=c(h.value,k));l||N.push({key:b,value:k});for(var h,l=!1,m=0;m<O.length;m++)h=O[m],h.key==b&&(l=!0,h.value=d(h.value,k));l||O.push({key:b,value:k})}}})});var P=A(g,u,t,"key","value",O,N,c),Q=P.margin;if(Q){var R=Q.left,S=Q.right,T=Q.top,U=Q.bottom;if(v){var V=0,W=0;k.forEach(function(a,b){if(a.line){var c=a.line.getLabel();if(c||(c="Series "+(b+1)),c){var e=g.append("text").attr("dy",".35em").attr("text-anchor","start").text(c),f=e.node().getBBox();e.remove();var h=d(f.width+8,60)+5;W=f.height,V=d(h,V)}}}),S=V+5,0<W&&(T=d(W/2,T))}(0<T||0<U||0<R||0<S)&&(t-=T+U,u-=R+S,g.selectAll("*").remove(),g.attr("transform","translate("+R+","+T+")"),P=A(g,u,t,"key","value",O,N,c)),Q={top:T,right:S,bottom:U,left:R}}j=P.x,b=P.y;var X=[];for(let a=0;a<C.length;a++)X.push({area:null,line:null,line2:null,tag:null,point:null});var Y=g.append("g");Y.attr("name","fill");for(let a=0;a<C.length;a++){var D=C[a].sumData;let d=C[a].lineConfig.fill,e=d.color,f=d.startOpacity,g=d.endOpacity;var F=C[a].lineConfig.smoothing;let h=z(D[0].key);var Z=function(a){return"date"===h?j(new Date(a.key)):j(a.key)},$=function(a){var d=parseFloat(a.value);return"logarithmic"===c.scaling?b(d+1):b(d)};if(0===f&&0===g)continue;let i="fill-gradient-"+a;p(e,f,g,i,Y),X[a].area=Y.append("path").datum(D).attr("fill",`url(#${i})`).attr("d",d3.area().x(Z).y0(t).y1($))}var _=g.append("g"),aa=g.append("g");aa.attr("name","circles"),_.attr("name","lines");for(let a=0;a<C.length;a++){var D=C[a].sumData;let b=C[a].lineConfig,c=b.point,d=b.color,e=b.style,f=b.width,g=b.opacity,i=c.radius,j=c.color;var F=b.smoothing,ba=function(){return F&&"spline"===F?d3.line().x(Z).y($).curve(d3.curveMonotoneX):d3.line().x(Z).y($)};if(X[a].line=_.append("path").datum(D).attr("fill","none").attr("stroke",d).attr("stroke-width",f).attr("opacity",g).attr("stroke-dasharray",function(){return"dashed"===e?"5, 5":"dotted"===e?"0, 5":void 0}).attr("stroke-linecap",function(){if("dotted"===e)return"round"}).attr("d",ba()),X[a].line2=_.append("path").datum(D).attr("dataset",a).attr("fill","none").attr("stroke","#ff0000").attr("stroke-width",10).attr("opacity",0).attr("d",ba()).on("click",function(a){var b=parseInt(d3.select(this).attr("dataset"));q(X[b]),h.onClick(this,b,a)}),i&&(X[a].point=aa.selectAll("points").data(D).enter().append("circle").attr("dataset",a).attr("fill",j).attr("stroke","none").attr("cx",Z).attr("cy",$).attr("r",i).on("click",function(a){var b=parseInt(d3.select(this).attr("dataset"));q(X[b]),h.onClick(this,b,a)})),v){var ca=b.label;ca||(ca="Series "+(a+1));var da=X[a].line2;X[a].tag=o(D,d,ca,da)}}var ea=e.animationSteps;if(!isNaN(ea)&&50<ea){let a=_.selectAll("path"),d=aa.selectAll("circle"),e=Y.selectAll("path"),f=d3.min(N,a=>parseFloat(a.value)),g="logarithmic"===c.scaling?b(f):b(0);if(a.attr("d",d3.line().x(Z).y(g)),d.attr("cx",Z).attr("cy",g),e.attr("d",d3.area().x(Z).y0(t).y1(g)),a.transition().duration(ea).attr("d",ba()),d.transition().duration(ea).attr("cx",Z).attr("cy",$),e.transition().duration(ea).attr("d",d3.area().x(Z).y0(t).y1($)),v)for(var fa=0;fa<X.length;fa++){var ga=X[fa].tag.poly,ha=X[fa].tag.text,ia=ga.attr("transform"),ja=ha.attr("transform"),ka=ia.slice(10).split(",")[0],la=ja.slice(10).split(",")[0];ga.attr("transform","translate("+ka+","+(t-9.6)+")"),ha.attr("transform","translate("+la+","+t+")"),ga.transition().duration(ea).attr("transform",ia),ha.transition().duration(ea).attr("transform",ja)}}(e.xGrid||e.yGrid)&&B(g,j,b,t,u,e.xGrid,e.yGrid)}};this.onClick=function(){};var o=function(e,f,i,k){var l=e[e.length-1],m=l.key,n=l.value,o=z(e[0].key);if("date"===o)var p=j(new Date(m));else var p=j(m);var q="logarithmic"===c.scaling?b(n+1):b(n),r=g.append("text").attr("dy",".35em").attr("text-anchor","start").text(i),s=r.node().getBBox();r.remove();var t=d(s.width+8,60),u=s.height,h=u/2,a=g.append("polygon").attr("points",[[0,0],[t,0],[t,u],[0,u],[-h,h]].join(" ")).attr("transform","translate("+(p+h)+","+(q-h)+")").style("fill",f).on("click",function(){k.dispatch("click")}),v=g.append("text").attr("transform","translate("+(p+h+4)+","+q+")").attr("dy",".35em").attr("text-anchor","start").style("fill","#fff").text(i).on("click",function(){k.dispatch("click")});return{poly:a,text:v}},p=function(a,b,c,d,e){null==b&&(b=0),null==c&&(c=0),e.append("defs").append("linearGradient").attr("id",d).attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%").selectAll("stop").data([{offset:"0%",color:a,opacity:b},{offset:"100%",color:a,opacity:c}]).enter().append("stop").attr("offset",a=>a.offset).attr("stop-color",a=>a.color).attr("stop-opacity",a=>a.opacity)},q=function(a){if(a){a.line.raise(),a.line2.raise(),a.point&&a.point.raise();var b=a.tag;if(b){var c=b.poly.node().parentNode,d=b.poly.node().cloneNode(!0),e=b.text.node().cloneNode(!0);b.poly.remove(),b.text.remove(),c.appendChild(d),c.appendChild(e),a.tag.poly=d3.select(d),a.tag.text=d3.select(e)}}},r=function(a,b,c){if("movingAverage"===a){if(!isNaN(b)&&0<b){function a(a,b){let c=[a[0]],d=0;for(let e=1;e<b;e++)d+=a[e],c.push(d/e);for(let d,e=b;e<a.length;e++)d=d3.mean(a.slice(e-b/2,e+b/2)),c.push(d);return c}var d=c.map(a=>a.value);let e=a(d,b);c.forEach(function(a,b){a.value=e[b]})}}else if("kde"===a){var d=c.map(a=>a.value),e=d.length,f=d3.extent(d),g=f[0],h=f[1],k=d.reduce((c,a)=>c+a,0),l=(h-g)/e;l=Math.round(l);for(var m=[],n=0;n<d.length;n++)for(var o=0;o<d[n];o++)m.push(n+.5),o+=l;for(var p,q=[],r=s(b),n=0;n<d.length;n++)p=d3.mean(m,function(a){return r(n-a)}),q.push([n,p]);c.forEach(function(a,b){a.value=q[b][1]*k})}},s=function(a){return b=>1>=Math.abs(b/=a)?.75*(1-b*b)/a:0},t=javaxt.dhtml.utils.merge,u=javaxt.dhtml.utils.onRender,v=bluewave.chart.utils.initChart,z=bluewave.chart.utils.getType,A=bluewave.chart.utils.drawAxes,B=bluewave.chart.utils.drawGridlines;l()};if(!bluewave)var bluewave={};bluewave.chart||(bluewave.chart={}),bluewave.chart.utils={initChart:function(a,b,c){var d;if(a instanceof d3.selection)d=a;else if(a instanceof SVGElement)d=d3.select(a);else{var e=d3.select(a).append("div").classed("svg-container",!0),d=e.append("svg").attr("preserveAspectRatio","xMidYMid meet").attr("height","100%").attr("width","100%").attr("viewBox","0 0 600 400").classed("svg-content-responsive",!0);javaxt.dhtml.utils.onRender(a,function(){var b=a.offsetWidth,c=a.offsetHeight;d.attr("viewBox",`0 0 ${b} ${c}`)})}var f=d.append("g");b&&b.apply(c,[d,f])},drawGridlines:function(a,b,c,d,e,f,g){f&&a.append("g").attr("class","grid").attr("transform","translate(0,"+d+")").call(d3.axisBottom(b).tickSize(-d).tickFormat("")),g&&a.append("g").attr("class","grid").call(d3.axisLeft(c).tickSize(-e).tickFormat(""))},drawLabels:function(a,b,c,d,e,f,g,h){if(b){var i=d;f&&(i+=f.bottom-2),a.append("text").attr("x",e/2).attr("y",i).style("text-anchor","middle").text(g)}if(c){var j=0;f&&(j-=f.left),a.append("text").attr("transform","rotate(-90)").attr("x",0-d/2).attr("y",j).attr("dy","1em").style("text-anchor","middle").text(h)}},drawAxes:function(a,b,c,d,e,f,g,h,i){var m,n,o,p,q,s,u,j=Math.max,k=Math.min,l=Number.MAX_VALUE,v=bluewave.chart.utils.getType,w=bluewave.chart.utils.getScale,z=bluewave.chart.utils.getDateFormat;let A=v(f[0][d]);"barChart"==i&&"date"==A&&(A="string"),u=w(d,A,[0,b],f,g),q=u.scale,o=u.band;let B=v(f[0][e]);"barChart"==i&&"date"==B&&(B="string");var C="logarithmic"===h.scaling?"logarithmic":"linear";u=w(e,B,[c,0],f,g,C),s=u.scale,p=u.band;var D=q.domain().length,E=function(a,b){var c,e,f;a.selectAll("text").each(function(a,d,g){var h=g[d].textContent;if("number"===b){if(isNaN(c)&&(c=0,g.forEach(function(a){var b=0==parseFloat(a.textContent)%1;b&&c++})),c==g.length){var i=d3.format(",");g[d].textContent=i(h)}}else if("date"===b){if(e||(e={},f={},g.forEach(function(a){var b=new Date(a.textContent),c=b.getFullYear(),g=b.getDate();e[c+""]=!0,f[g+""]=!0}),e=Object.keys(e),f=Object.keys(f)),1<e.length){if(1==f.length){var i=d3.timeFormat("%m/%y");h=i(a)}}else if(1==f.length){var i=d3.timeFormat("%b");h=i(a)}0===h.indexOf("0")&&(h=h.substring(1)),h=h.replaceAll("/0","/"),g[d].textContent=h}})},F=function(a,b){var c;if("date"===a)c=d3.timeFormat(z(b));else if("number"===a){c=d3.format(".1f")}return c},G=function(a){var b=[];return a.selectAll("text").each(function(){var a=javaxt.dhtml.utils.getRect(this);b.push({left:a.x,right:a.x+a.width,top:a.y,bottom:a.y+a.height})}),b},H=F(A,h.xFormat);m=a.append("g").attr("transform","translate(0,"+c+")").call(d3.axisBottom(q).ticks(h.xTicks).tickValues(D*10<b?null:q.domain().filter(function(a,c){let d=parseInt(b/10);return!(0!==c)||!(c%d)})).tickFormat(H)),h.xFormat||E(m,A);var I=function(a,c=0){var d=!1;a.forEach(function(a){a.top-=c,a.left-=c,a.right+=c,a.bottom+=c});for(var e,f=0;f<a.length;f++){e=a[f];for(var g=0;g<a.length;g++)if(g!==f){var h=a[g];if(javaxt.dhtml.utils.intersects(e,h)){d=!0;break}}if(d)break}return d},J=G(m),K=I(J,3);K&&m.selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end");var L=F(B,h.yFormat);n=a.append("g").call("linear"==C?d3.axisLeft(s).tickFormat(L):d3.axisLeft(s).ticks(10,",").tickFormat(L)),h.yFormat||E(n,B);var M=G(n),N=I(M,3);if(N){let a=n.selectAll("text").size();n.selectAll("text").attr("visibility",function(b,c){return a%2?0==(c+1)%2?"hidden":"visible":0==c%2?"hidden":"visible"})}var O=javaxt.dhtml.utils.getRect(m.node()),P=javaxt.dhtml.utils.getRect(n.node()),Q=l,R=0,S=l,T=0;m.selectAll("line").each(function(){var a=javaxt.dhtml.utils.getRect(this);Q=k(a.x,Q),R=j(a.x+a.width,R)}),n.selectAll("line").each(function(){var a=javaxt.dhtml.utils.getRect(this);S=k(a.y,S),T=j(a.y+a.height,T)});var U=O.left-Q;0>U&&(U=0);var V=O.right-R;0>V&&(V=0),U=j(P.width,U);var W=S-P.top,X=O.height,Y=16,Z=h.xLabel;if(Z){var $=m.append("text").attr("x",(O.right-O.left)/2).attr("y",X+Y).attr("class","chart-axis-label").style("text-anchor","middle").text(Z),_=javaxt.dhtml.utils.getRect($.node());X+=_.height+Y}var aa=h.yLabel;if(aa){var $=n.append("text").attr("transform","rotate(-90)").attr("x",-(P.height/2)).attr("y",-(P.width+Y)).attr("class","chart-axis-label").style("text-anchor","middle").text(aa),_=javaxt.dhtml.utils.getRect($.node());U=j(U+(_.width+Y),U)}return{xAxis:m,yAxis:n,xBand:o,yBand:p,x:q,y:s,margin:{top:W,right:V,bottom:X,left:U}}},getScale:function(a,b,c,d,e,f){let g,h;switch(b){case"string":g=d3.scaleBand().domain(d.map(function(b){return b[a]})).range(c).padding(.2);break;case"date":var i=[new Date(d3.min(d,b=>b[a])),new Date(d3.max(d,b=>b[a]))];d.map(b=>(b[a]=new Date(b[a]),b)),g=d3.scaleTime().domain(i).rangeRound(c),h=d3.scaleBand().domain(d3.timeDay.range(...g.domain())).rangeRound(c).padding(.2);break;default:var j,k;if(!e){var l=d3.extent(d,function(b){return parseFloat(b[a])});j=0,k=l[1]}else j=d3.min(e,function(b){return parseFloat(b[a])}),k=d3.max(d,function(b){return parseFloat(b[a])});j===k&&(k=j+1),f||(f="linear"),"linear"===f?(0<j&&(j=0),g=d3.scaleLinear().domain([j,k])):"logarithmic"==f&&(1>j&&(j=1),g=d3.scaleLog().domain([j,k+1])),g.range(c);}return{scale:g,band:h}},extendScale:function(a,b,c,d){var f,g,e=Math.ceil,h=a.scale.domain(),i=bluewave.chart.utils.getType;if(d||(d=i(h[0])),c||(c=1),"date"===d){let a=h[1],d=h[0],e=a.getTime(),i=(a-d)*c,j=new Date(e+i);f=d3.scaleTime().domain([d,j]).rangeRound(b),g=d3.scaleBand().domain(d3.timeDay.range(...f.domain())).rangeRound(b).padding(.2)}else if("string"===d){let a=e(h.length*c),d="",g=h;for(let b=0;b<a;b++)d+=" ",g.push(d);f=d3.scaleBand().domain(g).range(b).padding(.2)}else{let a=[h[0],h[1]*(c+1)];f=d3.scaleLinear().domain(a).range(b)}return{scale:f,band:g}},reDrawAxes:function(a,b,c,d,e,f){b&&(b.remove(),b=a.append("g").attr("transform","translate(0,"+f+")").call(d3.axisBottom(c))),d&&(d.remove(),d=a.append("g").call(d3.axisLeft(e)))},getType:function(a){var b=javaxt.dhtml.utils.isArray(a)?a:[a],c=function(a){let b;switch(typeof a){case"string":b=a.match(/^[\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?$/)?"number":Date.parse(a)?"date":"string";break;case"number":b="number";break;case"object":b="date";break;default:}return b},d=0,e=0,f=0,g=0;return b.forEach(function(a){var b=c(a);"string"===b?f++:"number"===b?d++:"date"===b?e++:g++}),e==b.length?"date":d==b.length?"number":f==b.length?"string":null},getDateFormat:function(a){var b="%m/%d/%Y";return a&&(b=a,b=b.replace("YYYY","%Y"),b=b.replace("YY","%y"),b=b.replace("MMMM","%B"),b=b.replace("MM","%m"),b=b.replace("M","%m"),b=b.replace("DD","%d"),b=b.replace("D","%d"),b=b.replace("A","%p"),b=b.replace("dddd","%A"),b=b.replace("HH","%H"),b=b.replace("h","%I"),b=b.replace("mm","%M"),b=b.replace("ss","%S")),b},getColorRange:function(a,b){var c=[];if(2<b.length){var d=b.length-1,e=a/d,f=0==e%1;f||(e=Math.floor(e));for(var g=0;g<b.length-1;g++)for(var h=[b[g],b[g+1]],k=d3.scaleLinear().domain([0,e-1]).range(h),l=0;l<e;l++)c.push(d3.color(k(l)).formatHex())}else for(var k=d3.scaleLinear().domain([0,a-1]).range(b),g=0;g<a;g++)c.push(d3.color(k(g)).formatHex());return c},getNaturalBreaks:function(a,b){var c=Math.min;function d(a,b){var c,d,e=[],f=[],g=0;for(c=0;c<a.length+1;c++){var h=[],k=[];for(d=0;d<b+1;d++)h.push(0),k.push(0);e.push(h),f.push(k)}for(c=1;c<b+1;c++)for(e[1][c]=1,f[1][c]=0,d=2;d<a.length+1;d++)f[d][c]=1/0;for(var n=2;n<a.length+1;n++){for(var o=0,p=0,q=0,r=0,s=1;s<n+1;s++){var t=n-s+1,u=a[t-1];if(q++,o+=u,p+=u*u,g=p-o*o/q,r=t-1,0!==r)for(d=2;d<b+1;d++)f[n][d]>=g+f[r][d-1]&&(e[n][d]=t,f[n][d]=g+f[r][d-1])}e[n][1]=1,f[n][1]=g}return{lower_class_limits:e,variance_combinations:f}}function e(a,b,c){var d=a.length-1,e=[],f=c;for(e[c]=a[a.length-1],e[0]=a[0];1<f;)e[f-1]=a[b[d][f]-2],d=b[d][f]-1,f--;return e}var f=[...new Set(a)].length;if(b=c(b,f-1),b>a.length)return null;a=a.slice().sort(function(c,a){return c-a});var g=d(a,b),h=g.lower_class_limits,i=[];try{i=e(a,h,b),i.unshift(0),i=[...new Set(i)]}catch(a){console.log(a)}return i},createTooltip:function(){var a=bluewave.chart.utils.Tooltip,b=javaxt.dhtml.utils.getHighestElements;return a||(a=bluewave.chart.utils.Tooltip=d3.select(document.body).append("div").style("opacity",0).style("top",0).style("left",0).style("display","none").attr("class","tooltip"),a.show=function(){var c=b(),d=c.zIndex;c.contains(a.node())||d++,a.style("opacity",1).style("display","block").style("z-index",d)},a.hide=function(){a.style("opacity",0).style("display","none")}),a}};if(!bluewave)var bluewave={};bluewave.chart||(bluewave.chart={}),bluewave.chart.Line=function(a){var b=this,c={color:"#6699CC",opacity:1,width:1,style:"solid",fill:{color:"#6699CC",startOpacity:0,endOpacity:0},point:{color:"#6699CC",radius:0},label:"",smoothing:"none",smoothingValue:0},d=function(){if(!a)return void(a=c);var d=a;a=c,b.setConfig(d)};this.setColor=function(b){b=e(b),b&&(a.color=b)},this.setOpacity=function(b){b=f(b),isNaN(b)||(a.opacity=b)},this.setWidth=function(b){b=parseFloat(b),!isNaN(b)&&0<b&&(a.width=b)},this.setStyle=function(b){b&&(b=(b+"").toLowerCase(),("solid"===b||"dashed"===b||"dotted"===b)&&(a.style=b))},this.setFill=function(b){if(!b)delete a.fill;else{var c=e(b.color);c&&(a.fill.color=c);var d=f(b.startOpacity);isNaN(d)||(a.fill.startOpacity=d);var d=f(b.endOpacity);isNaN(d)||(a.fill.endOpacity=d)}},this.setPoint=function(b){if(!b)delete a.point;else{var c=e(b.color);c&&(a.point.color=c);var d=parseFloat(b.radius);!isNaN(d)&&0<d&&(a.point.radius=d)}},this.setLabel=function(b){a.label=b},this.setSmoothing=function(b){if(b){switch(b=(b+"").toLowerCase(),b){case"spline":case"simple spline":b="spline";break;case"moving average":case"movingaverage":b="movingAverage";break;case"kernel density estimation":case"kde":b="kde";break;case"curvenatural":b="curveNatural";break;default:b="none";}a.smoothing=b}},this.setSmoothingValue=function(b){b=parseFloat(b),isNaN(b)||0>b||(a.smoothingValue=b)},this.getConfig=function(){return a},this.setConfig=function(a){for(var c in a)if(a.hasOwnProperty(c)){var d="set"+c.substring(0,1).toUpperCase()+c.substring(1);b[d]&&b[d].apply(b,[a[c]])}},this.getColor=()=>a.color,this.getWidth=()=>a.width,this.getStyle=()=>a.style,this.getFill=()=>a.fill,this.getPoint=()=>a.point,this.getLabel=()=>a.label,this.getSmoothing=()=>a.smoothing,this.getSmoothingValue=()=>a.smoothingValue,this.clone=function(){let b=Object.assign({},a);return new bluewave.chart.Line(b)};var e=function(a){return a},f=function(a){return a=parseFloat(a),isNaN(a)?null:0>a||1<a?null:a};d()};if(!bluewave)var bluewave={};bluewave.charts||(bluewave.charts={}),bluewave.charts.SankeyChart=function(a,b){var c,d,e,f=this,g={margin:{top:10,right:10,bottom:10,left:10},links:{color:"#ccc",opacity:.3}},h=[],i=[],j=d3.scaleOrdinal(d3.schemeCategory10),k=function(){f.setConfig(b),p(a,function(a,b){c=a,d=b})};this.setConfig=function(a){b=a?n(a,g):g},this.getChart=function(){return e},this.getNodeColor=function(a){return j(a.name.replace(/ .*/,""))},this.getNodeLabel=function(a){return a.name},this.addNode=function(a,b){if(a){var c;return c=a.name?a:{name:a,group:b},h.push(c),c}},this.addLink=function(a,b,c){if(a&&b){a.name&&(a=a.name),b.name&&(b=b.name);var d={source:a,target:b,value:c};return i.push(d),d}},this.clear=function(){l(),h=[],i=[]},this.update=function(a,b){f.setConfig(a),b&&(f.clear(),b.nodes&&(h=b.nodes),b.links&&(i=b.links));var d=c.node().parentNode;o(d,function(){m(d)})};var l=function(){d&&d.selectAll("*").remove()},m=function(a){var c=Math.max;l();var g=a.offsetWidth,j=a.offsetHeight;e=d.append("g"),e.attr("name","sankey").attr("width",g).attr("height",j);var k=d3.sankey().nodeId(a=>a.name).nodeWidth(20).nodePadding(20).iterations([6]).size([g,j]);let m=k({nodes:h,links:i});var n=k.size(),g=n[0],o=d3.format(",.0f"),p=e.append("g");p.attr("name","links");var q=p.selectAll("*").data(m.links).enter().append("path").attr("class","sankey-link").attr("d",d3.sankeyLinkHorizontal()).attr("stroke-width",function(a){return c(a.width,1)}).style("stroke-opacity",function(a){return a.opacity=b.links.opacity}).style("stroke",function(){return b.links.color}).on("mouseover",function(){var a=Math.min(1,1.3*b.links.opacity);d3.select(this).style("stroke-opacity",a)}).on("mouseout",function(a){d3.select(this).style("stroke-opacity",a.opacity)}),r=e.append("g");r.attr("name","nodes");var s=r.selectAll("*").data(m.nodes).enter().append("g").attr("class","sankey-node");s.append("rect").attr("x",function(a){return a.x0}).attr("y",function(a){return a.y0}).attr("height",function(a){return c(a.y1-a.y0,1)}).attr("width",k.nodeWidth()).style("fill",function(a){return a.color=f.getNodeColor(a)}).style("stroke",function(a){return d3.rgb(a.color).darker(2)}).append("title").text(function(a){return a.name+"\n"+o(a.value)}),"source"===b.links.color&&q.each(function(){var a=d3.select(this);a.style("stroke",function(a){return a.source.color})}),q.append("title").text(function(a){return a.source.name+" \u2192 "+a.target.name+"\n"+o(a.value)}),s.append("text").attr("x",function(a){return a.x0-6}).attr("y",function(a){return(a.y1+a.y0)/2}).attr("dy","0.35em").attr("text-anchor","end").text(function(a){return f.getNodeLabel(a)}).filter(function(a){return a.x0<g/2}).attr("x",function(a){return a.x1+6}).attr("text-anchor","start")},n=javaxt.dhtml.utils.merge,o=javaxt.dhtml.utils.onRender,p=bluewave.chart.utils.initChart;k()};if(!bluewave)var bluewave={};bluewave.charts||(bluewave.charts={}),bluewave.charts.TreeMapChart=function(a,b){var c,d,e=this,f={keyLabel:!0,groupLabel:!0,valueLabel:!0,key:"name",value:"value",groupBy:null,colors:["#0d90f2","#14e8eb","#1ce35b","#402D54","#D18975","#8FD175","#cc0a12","#b8eb14"]},g=function(){e.setConfig(b),m(a,function(a,b){c=a,d=b})};this.setConfig=function(a){if(!a)var b=f;else var b=k(a,f)},this.clear=function(){d&&d.selectAll("*").remove()};var h=(a,b,c)=>{if(Array.isArray(a))for(const d of a){const a=h(d,b,c);if(a)return d}else{if(a.hasOwnProperty(b)&&a[b]===c)return a;for(const d of Object.keys(a))if("object"==typeof a[d]){const e=h(a[d],b,c);if(null!==e&&"undefined"!=typeof e)return e}return null}},i=function(a){if(null!==b.groupBy){var c=[];a.forEach(a=>{var d=a[b.groupBy];c.push(d)});var d=c.filter(function(a,b,c){return c.indexOf(a)===b})}a.forEach(a=>{var c=a[b.value];a[b.value]=parseFloat(c)});var e={children:[],name:"all"};if(null!==b.groupBy)d.forEach(c=>{e.children.push({name:c,children:[],colname:"level2"});var f=h(e.children,"name",c);a.forEach(a=>{var d=a[b.key],e=a[b.groupBy],g=a[b.value];if(c===e)if("undefined"!=typeof h(f.children,"name",d)){var i=h(f.children,"name",d);i.value+=g}else f.children.push({name:d,group:e,colname:"level3",value:g})})});else{e.children.push({name:"",children:[],colname:"level2"});var f=h(e.children,"name","");a.forEach(a=>{var c=a[b.key],d=a[b.value];"undefined"==typeof h(f.children,"name",c)?f.children.push({name:c,group:"",colname:"level3",value:d}):(userRecord=h(f.children,"name",c),userRecord.value+=d)})}return e};this.update=function(a,d){e.clear(),b=k(a,f);var d=i(d),g=c.node().parentNode;l(g,function(){j(d)})};var j=function(c){var e=b,f=a.offsetWidth,g=a.offsetHeight,i=d3.hierarchy(c).sum(a=>a.value);if(d3.treemap().size([f,g]).paddingTop(28).paddingRight(7).paddingInner(3)(i),"undefined"!=typeof groupNames)var j=d3.scaleOrdinal().domain(groupNames).range(e.colors);else var j=d3.scaleOrdinal().range(e.colors);var k=function(a,b){var d=h(c.children,"name",b),e=[];d.children.forEach(a=>{e.push(a.value)});var f=d3.scaleLinear().domain([d3.min(e),d3.max(e)]).range([.5,1]);return f(a)};d.selectAll("rect").data(i.leaves()).enter().append("rect").attr("x",a=>a.x0).attr("y",a=>a.y0).attr("width",a=>a.x1-a.x0).attr("height",a=>a.y1-a.y0).style("stroke","black").style("fill",a=>j(a.parent.data.name)).style("opacity",a=>k(a.data.value,a.data.group)),e.keyLabel&&d.selectAll("text").data(i.leaves()).enter().append("text").attr("x",a=>a.x0+5).attr("y",a=>a.y0+20).text(a=>a.data.name).attr("font-size","19px").attr("fill","white"),e.valueLabel&&d.selectAll("vals").data(i.leaves()).enter().append("text").attr("x",a=>a.x0+5).attr("y",a=>a.y0+35).text(a=>a.data.value).attr("font-size","11px").attr("fill","white"),e.groupLabel&&d.selectAll("titles").data(i.descendants().filter(a=>1==a.depth)).enter().append("text").attr("x",a=>a.x0).attr("y",a=>a.y0+21).text(a=>a.data.name).attr("font-size","19px").attr("fill",a=>j(a.data.name)),d.append("text").attr("x",0).attr("y",14).attr("font-size","19px").attr("fill","grey")},k=javaxt.dhtml.utils.merge,l=javaxt.dhtml.utils.onRender,m=bluewave.chart.utils.initChart,n=bluewave.chart.utils.getColorRange,o=bluewave.chart.utils.getNaturalBreaks,p=javaxt.dhtml.utils.getHighestElements;g()};if(!bluewave)var bluewave={};bluewave.charts||(bluewave.charts={}),bluewave.charts.PieChart=function(a,c){var e,f,d=Math.min,g=this,b={pieKey:"key",pieValue:"value",pieCutout:.65,showLabels:!0,labelOffset:100,lineColor:"#777",extendLines:!1,colors:["#6699cc","#f8f8f8"],colorScaling:"linear",otherColor:"#b8b8b8",animationSteps:1500},h=function(){g.setConfig(c),o(a,function(a,b){e=a,f=b})};this.setConfig=function(a){c=a?l(a,b):b},this.getTooltipLabel=function(a){return a.key+"<br/>"+a.value},this.clear=function(){f&&(f.node().innerHTML="",f.attr("transform",null))},this.update=function(a,b){g.clear(),g.setConfig(a);var c=e.node().parentNode;m(c,function(){i(b,c)})};var i=function(a,b){var e=Math.abs,h=Math.PI;if(n(a)&&n(a[0])&&(a=a[0]),!c.pieKey||!c.pieValue)return;var i=c.pieSort;i=(i+"").toLowerCase();var l=(c.pieSortDir+"").toLowerCase();"key"===i?a.sort(function(d,a){return j(d[c.pieKey],a[c.pieKey],l)}):"value"===i&&(a=a.sort(function(d,e){return d=parseFloat(d[c.pieValue]),e=parseFloat(e[c.pieValue]),j(d,e,l)}));var m=a.length,o=parseFloat(c.maximumSlices),q=!1;if(!isNaN(o)&&0<o&&o<m){var r;if("descending"===l?(r=a.slice(o),a=a.slice(0,o)):(r=a.slice(0,m-o),a=a.slice(m-o,m)),!0===c.showOther){var s=0;r.forEach(function(a){var b=parseFloat(a[c.pieValue]);isNaN(b)||(s+=b)}),a.push({[c.pieKey]:"Other",[c.pieValue]:s}),q=!0}m=a.length}let t=a.reduce((a,b)=>(a[b[c.pieKey]]=b[c.pieValue],a),{});var u=0;"undefined"!=typeof c.piePadding&&(u=c.piePadding*h/180);var v=d3.pie().value(function(a){return a.value}).sort(null).padAngle(u);t=v(d3.entries(t));var w=b.offsetWidth,z=b.offsetHeight,A=f.append("g");A.attr("transform","translate("+w/2+","+z/2+")");var B=d(w,z)/2,C=c.pieCutout;null==C&&(C=.65);var D,E=B*C;!0===c.showTooltip&&(D=p());var F=function(a){if(D){var b=g.getTooltipLabel(a.data);D.html(b).show()}d3.select(this).transition().duration(100).attr("opacity","0.8")},G=function(){var a=d3.event;D&&D.style("top",a.clientY+"px").style("left",a.clientX+20+"px")},H=function(){D&&D.hide(),d3.select(this).transition().duration(100).attr("opacity","1")},I=c.colors;I||(I=["#6699cc","#f8f8f8"]);var J=c.colorScaling;J||(J="linear");var K=c.otherColor;K||(K="#b8b8b8");var L;if("linear"===J){var M=m-(q?2:1);L=d3.scaleLinear().domain([0,M]).range(I)}else"ordinal"===J&&(L=d3.scaleOrdinal(I));var N=d3.arc().innerRadius(E).outerRadius(B),O=A.append("g");O.attr("name","pie"),O.selectAll("*").data(t).enter().append("path").attr("d",N).attr("fill",function(a,b){return q&&b==m-1?K:L(b)}).attr("stroke","#777").style("stroke-width","1px").on("mouseover",F).on("mousemove",G).on("mouseleave",H);var P=!0===c.showLabels;if(P&&"undefined"!==t[0].data.key&&!isNaN(t[0].value)){var Q=parseFloat(c.labelOffset);(isNaN(Q)||0>Q)&&(Q=100);var R=0;if(100<Q)R=B*(Q/100);else{R=E+(B-E)*(Q/100)}var S=!0===c.extendLines;S&&110>=Q&&(S=!1);var T=d3.arc().innerRadius(E).outerRadius(E+90*(B-E)/50),U=d3.arc().innerRadius(B).outerRadius(B+2*(R-B));if(!1){var V=A.append("g").attr("name","test");V.selectAll("*").data([{startAngle:0,endAngle:360*h/180}]).enter().append("path").attr("d",d3.arc().innerRadius(E).outerRadius(R)).attr("fill","none").attr("stroke","#ff0000").attr("stroke-width",1)}let e=[];var W=A.append("g");W.attr("name","lines"),W.selectAll("*").data(t).enter().append("polyline").attr("opacity","0").attr("stroke",c.lineColor).style("fill","none").attr("stroke-width",1).attr("points",function(c){var d=T.centroid(c),a=U.centroid(c),b=[d,a],f=c.startAngle+(c.endAngle-c.startAngle)/2;return S&&b.push([R*(!!(f<h)?1:-1),a[1]]),e.push(b[b.length-1]),b}),110<Q&&W.selectAll("polyline").attr("opacity","1");var X=A.append("g");X.attr("name","labels"),X.selectAll("*").data(t).enter().append("text").text(function(a){return a.data.key}).attr("transform",function(a,b){return"translate("+e[b]+")"}).style("text-anchor",function(a,b){if(b==m-1&&!S)return"middle";var c=a.startAngle+(a.endAngle-a.startAngle)/2;return c<h?"start":"end"});var Y=k(f);if(Y.width=1.1*(Y.maxX-Y.minX),Y.height=1.1*(Y.maxY-Y.minY),Y.width>w||Y.height>z){var Z,$,_,aa=Y.width-w,ba=Y.height-z;aa>ba?(Z=w/Y.width,1<Z&&(Z=1+(1-Z)),$=w/2,_=z/2):ba>aa&&(Z=z/Y.height,$=w/2,_=Y.height),A.attr("transform","translate("+$+","+_+") scale("+Z+")");var ca=javaxt.dhtml.utils.getRect(b),_=ca.y,$=ca.x,da=ca.x+ca.width/2,ea=ca.y+ca.height/2,ca=javaxt.dhtml.utils.getRect(A.node()),fa=(z-ca.height)/2,ga=(w-ca.width)/2,ha=ca.x+ca.width/2,ia=ca.y+ca.height/2,ga=da-ha,fa=ea-ia;0>fa&&(fa=0),0>ga&&(ga=0),A.attr("transform","translate("+(w/2+ga)+","+(z/2+fa)+") scale("+Z+")")}}var ja=c.animationSteps;if(!isNaN(ja)&&50<ja){var ka=0;ja/=2;var la=O.selectAll("path"),ma=d3.arc().innerRadius(0).outerRadius(0);if(la.attr("d",ma),la.transition().delay(function(a){var b=e(a.startAngle-a.endAngle)+a.padAngle,c=ka,d=b/(2*h)*ja;return ka+=d,c}).duration(function(a){var b=e(a.startAngle-a.endAngle)+a.padAngle;return b/(2*h)*ja}).ease(d3.easeLinear).attrTween("d",function(a){var b=d3.interpolate(a.startAngle,a.endAngle);return function(c){return a.endAngle=b(c),N(a)}}),P){var na=X.selectAll("text"),oa=W.selectAll("polyline");oa.attr("opacity",0),na.attr("opacity",0);var pa=function(a,b){return b*ja/m};oa.transition().delay(pa).duration(ja).attr("opacity",1),na.transition().delay(pa).duration(ja).attr("opacity",1)}}},j=function(a,b,c){var d="string"==typeof a&&"string"==typeof b;return c=(c+"").toLowerCase(),"descending"===c?d?b.localeCompare(a):b-a:d?a.localeCompare(b):a-b},k=function(a){var b=Number.MAX_VALUE,c=b,e=0,f=b,g=0;return a.selectAll("*").each(function(){var a=Math.max,b=javaxt.dhtml.utils.getRect(d3.select(this).node());c=d(b.left,c),e=a(b.right,e),f=d(b.top,f),g=a(b.bottom,g)}),{minX:c,maxX:e,minY:f,maxY:g}},l=javaxt.dhtml.utils.merge,m=javaxt.dhtml.utils.onRender,n=javaxt.dhtml.utils.isArray,o=bluewave.chart.utils.initChart,p=bluewave.chart.utils.createTooltip;h()};if(!bluewave)var bluewave={};bluewave.charts||(bluewave.charts={}),bluewave.charts.MapChart=function(a,b){var d,e,f,g,i,j,k,l,c=Math.PI,m=this,h={style:{backgroundColor:"#fff"}},n=!1,o=[],p={},q="Mercator",r=function(){b=G(b,h),J(a,function(a,b){d=a,e=b}),d.call(d3.zoom().scaleExtent([1,1]).on("zoom",u)),d.on("click",function(a){var b=m.getProjection();if(b){var c=d3.mouse(this),d=b.invert(c);m.onMouseClick(d[1],d[0],a)}})};this.addPoints=function(a,b){o.push({type:"points",features:a,config:b})},this.addLines=function(a,b){o.push({type:"lines",features:a,config:b})},this.addPolygons=function(a,b){o.push({type:"polygons",features:a,config:b})},this.addLabels=function(a,b){o.push({type:"labels",features:a,config:b})},this.addGrid=function(a){o.push({type:"grid",features:null,config:a})},this.setBackgroundColor=function(a){b.style.backgroundColor=a,a&&l&&l.attr("fill",a)},this.getProjection=function(){return f},this.setProjection=function(a){q=a,f=d3["geo"+a]()},this.getCentroid=function(a){if(!a)return null;f||m.setProjection("Mercator");var b=d3.geoPath(f);if(H(a)){var c="Point";H(a[0])&&(c="Polygon"),a={type:"Feature",geometry:{type:c,coordinates:a}}}var d=b.centroid(a);return d=f.invert(d),d},this.onRecenter=function(){},this.onRedraw=function(){},this.onMouseClick=function(){},this.enablePan=function(){n=!1},this.disablePan=function(){n=!0},this.clear=function(){s(),f=g=i=j=k=null,o=[]};var s=function(){e.node().innerHTML="",e.attr("transform",null)};this.resize=function(){},this.setCenter=function(b,d){var e=a.offsetWidth,g=a.offsetHeight;d||(d=e/2/c),f.rotate([-b[0],0]).center([0,b[1]]).scale(d).translate([e/2,g/2])},this.getMidPoint=function(a,b,c){f||m.setProjection("Mercator"),isNaN(b)&&(b=0),c="south"===c?1:-1;var d=a.slice();d[0]=f(d[0]),d[1]=f(d[1]),0>d[1][0]-d[0][0]&&d.reverse();var e=(d[0][0]+d[1][0])/2,g=(d[0][1]+d[1][1])/2,h=d[1][0]-d[0][0],i=d[1][1]-d[0][1],j=[-i*b*c,h*b*c],k=[j[0]+e,j[1]+g];return k=f.invert(k),k},this.update=function(a){s();var b=d.node().parentNode;I(b,function(){t(b),a&&a()})};var t=function(a){s();var d=a.offsetWidth,e=a.offsetHeight,h=parseFloat(b.lat),l=parseFloat(b.lon);return isNaN(h)&&(h=0),isNaN(l)&&(l=0),f||m.setProjection("Mercator"),"AlbersUsa"===q?(f.translate([d/2,e/2]),void z()):void(f.scale(d/2/c).rotate([-l,0]).center([0,h]).translate([d/2,e/2]),g=f.scale(),i=f.translate(),j=f.rotate(),k=f.center(),v(p),z())},u=function(){var a=m.getProjection();if(a&&!n){var b=javaxt.dhtml.utils.getRect(d.node()),c=b.width,e=b.height,f=d3.event.transform,g=c/2-f.x,h=e/2-f.y,l=a.invert([g,h]),o=d3.scaleLinear().domain([0,e]).range([0,180]),p=d3.scaleLinear().domain([0,c]).range([0,360]),q=i[0]-f.invertX(i[0]),r=i[1]-f.invertY(i[1]),s=o(r)/2+k[1],t=p(q)+j[0];a.rotate([t,j[1],j[2]]),a.center([0,s]),z(),m.onRecenter(l[1],l[0])}};this.getExtent=function(){var a=m.getProjection();if(a){var b=javaxt.dhtml.utils.getRect(d.node()),c=b.width,e=b.height,f=a.invert([0,0]),g=a.invert([c,e]);return{left:f[0],right:g[0],top:f[1],bottom:g[1]}}},this.setExtent=function(a,b,c){p.upperLeft=a,p.lowerRight=b,f?(v(p),c&&c()):m.update(function(){v(p),c&&c()})};var v=function(a,b=10){var c=Math.abs;if(!(0>b||isNaN(b))&&f&&"AlbersUsa"!==q&&a.upperLeft&&a.lowerRight){var e=a.upperLeft,g=a.lowerRight,i=f.scale(),j=m.getExtent(),k=javaxt.dhtml.utils.getRect(d.node()),l=k.width,n=k.height;"Albers"==q&&f.parallels([g[1]+c(g[1]*(1/6)),e[1]-c(e[1]*(1/6))]);var h=f([j.left,j.top]),o=f([j.right,j.bottom]),p=c(h[0]-o[0]),r=c(h[1]-o[1]);f(e)[0]>f(g)[0]&&f.rotate([-e[0]-180,0]);var s,t=f(e),u=f(g),w=c(t[0]-u[0]);s=w/p,f.scale(i/s),t=f(e),u=f(g);var x=[t[0]+l/2,t[1]+n/2],y=f.invert(x);f.rotate([-y[0],0]).center([0,y[1]]),y=m.getMidPoint([e,g]);var z=m.getExtent(),A=c(g[1]-z.bottom);if(g[1]<z.bottom){let a=z.top-z.bottom,b=A/a;b++;let c=f.scale();f.scale(c/b)}f.rotate([-y[0],0]).center([0,y[1]]),v(a,--b)}},z=function(){s();var a=e.append("g");a.attr("name","background"),l=a.append("rect").attr("width","100%").attr("height","100%"),b.style.backgroundColor&&l.attr("fill",b.style.backgroundColor);var c=e.append("g");c.attr("name","layers");var d=d3.geoPath(f);o.forEach(function(a,b){a.config||(a.config={});var e=a.config.name;e||(e="layer"+b);var f=c.append("g");f.attr("name",e),"points"===a.type?A(a,f,d):"lines"===a.type&&B(a,f,d),"polygons"===a.type?D(a,f,d):"labels"===a.type?E(a,f,d):"grid"===a.type&&C(a,f,d)})},A=function(a,b){a.config||(a.config={});var c=a.config,e=a.config.style;e||(e={});var g;!0===c.showTooltip&&(g=K());var h=!1;(g||c.onClick)&&(h=!0);var i=e.fill;i||(i="red");var j=e.opacity;j||(j=1);var k=parseInt(e.radius);isNaN(k)&&(k=3),0>k&&(k=1);var l=parseFloat(e.outlineWidth);isNaN(l)&&(l=1);var n=e.outlineColor,o=b.selectAll("*").data(a.features).enter().append("circle").attr("r",function(a){return"function"==typeof e.radius?e.radius(a):k}).attr("transform",function(a){var b=F(a);return b&&(b=f(b)),b?"translate("+b+")":""}).attr("opacity",j).style("fill",i).attr("stroke",n).attr("stroke-width",l).attr("stroke-opacity",j).on("click",function(b,d,f){if(c.onClick){var g=d3.event;c.onClick.apply(m,[{feature:b,element:f[d],layer:a,event:g}])}});a.elements=o},B=function(a,b){a.config||(a.config={});var c=a.config.style;c||(c={});var d=parseInt(c.width);isNaN(d)&&(d=1);var e=c.lineStyle;e||(e="solid");var g=c.smoothing;g&&"none"!==g||(g="curveLinear");var h=c.color;h||(h="red");var i=c.opacity;i||(i=1);var j=b.selectAll("*").data(a.features).enter().append("path").attr("d",function(a){var b=d3.line().curve(d3[g]),c=a.map(a=>f(a));return b(c)}).attr("fill","none").attr("opacity",i).style("stroke",h).style("stroke-width",d).attr("stroke-dasharray",function(){if("dashed"===e)return"10, 10";return"dotted"===e?"0, 10":void 0}).attr("stroke-linecap",function(){if("dotted"===e)return"round"});a.elements=j},C=function(a,b,c){a.config||(a.config={});var d=a.config.style;d||(d={});var e=parseInt(d.width);isNaN(e)&&(e=.5);var f=d.lineStyle;f||(f="solid");var g=d.color;g||(g="gray");var h=d.opacity;h||(h=.5);var i=d.longSteps;i||(i=10);var j=d.latSteps;j||(j=10);var k=d3.geoGraticule().step([i,j]),l=b.selectAll("*").data([k()]).enter().append("path").attr("d",c).attr("fill","none").attr("opacity",h).style("stroke",g).style("stroke-width",e).attr("stroke-dasharray",function(){if("dashed"===f)return"10, 10";return"dotted"===f?"0, 10":void 0}).attr("stroke-linecap",function(){if("dotted"===f)return"round"});a.elements=l},D=function(a,b,c){a.config||(a.config={});var d=a.config,e=a.config.style;e||(e={});var f;!0===d.showTooltip&&(f=K());var g=!1;(f||d.onClick)&&(g=!0);var h=function(b){if(f){var c=m.getTooltipLabel(b.data),e=getHighestElements(),h=e.zIndex;e.contains(f.node())||h++,f.html(c).style("opacity",1).style("display","block").style("z-index",h)}var i=d3.select(this);g&&(i.transition().duration(100),i.attr("opacity","0.8")),d.onMouseOver&&d.onMouseOver.apply(m,[{feature:b,element:i,layer:a}])},i=function(){var a=d3.event;f&&f.style("top",a.clientY+"px").style("left",a.clientX+20+"px")},j=function(b){f&&f.style("opacity",0).style("display","none");var c=d3.select(this);g&&(c.transition().duration(100),c.attr("opacity","1")),d.onMouseLeave&&d.onMouseLeave.apply(m,[{feature:b,element:c,layer:a}])},k=e.fill;k||(k="#DEDDE0");var l=e.stroke;l||(l="#fff");var n=b.selectAll("*").data(a.features).enter().append("path").attr("d",c).attr("fill",function(a){return"function"==typeof e.fill?e.fill(a):k}).attr("stroke",l).style("stroke-width",.4).on("mouseover",h).on("mousemove",i).on("mouseleave",j).on("click",function(b,c,f){if(d.onClick){var g=d3.event;d.onClick.apply(m,[{feature:b,element:f[c],layer:a,event:g}])}});a.elements=n},E=function(a,b){a.config||(a.config={});var c=a.config,d=a.config.style;d||(d={});var e=parseFloat(d.fontSize);isNaN(e)&&(e=12);var g=d.color;g||(g=d.fill),g||(g="#000");var h=d.textAlign;h||(h="left");var i=b.selectAll("text").data(a.features).enter().append("text").attr("transform",function(a){var b=F(a);if(b){b=f(b);var c=b[0],d=b[1];return isNaN(c)||isNaN(d)?"":`translate(  ${c}, ${d}  )`}return""}).attr("font-size",e).attr("text-anchor",()=>"center"==h?"middle":h).style("fill",g).text(b=>b.properties&&a.config.label?b.properties[a.config.label]:"").on("click",function(b,d,e){c.onClick&&c.onClick.apply(m,[{feature:b,element:e[d],layer:a}])});a.elements=i},F=function(a){if(H(a))return a;return a.geometry?a.geometry.coordinates:null},G=javaxt.dhtml.utils.merge,H=javaxt.dhtml.utils.isArray,I=javaxt.dhtml.utils.onRender,J=bluewave.chart.utils.initChart,K=bluewave.chart.utils.createTooltip;r()};