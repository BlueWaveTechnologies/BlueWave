if(!javaxt)var javaxt={};if(!javaxt.dhtml)javaxt.dhtml={};
if(!javaxt){var javaxt={}}if(!javaxt.express){javaxt.express={}}javaxt.express.WebSite=function(content,config){this.className="javaxt.express.WebSite";var me=this;var tabs;var carousel;var slideIndex;var defaultConfig={padding:20,animationSteps:600,style:{panel:{background:"#fff",height:""}}};var fx=new javaxt.dhtml.Effects();var pageLoader=new javaxt.dhtml.PageLoader();var body=document.getElementsByTagName("body")[0];var debug=false;var init=function(){var clone={};merge(clone,config);merge(clone,defaultConfig);config=clone;tabs=config.tabs;var arr=[];for(var i=0;i<tabs.length;i++){var path=getPath(tabs[i].pathname);var dir=getDir(path);var div=tabs[i].getElementsByTagName("div")[0];arr.push({dir:dir,div:div})}tabs=arr;var links=document.getElementsByTagName("a");parseLinks(links);if(typeof SyntaxHighlighter!=="undefined"){SyntaxHighlighter.defaults["class-name"]="code-block";SyntaxHighlighter.defaults.toolbar=false;SyntaxHighlighter.defaults.gutter=false;highlight(content)}content.style.height=content.offsetHeight+"px";var currPage=document.createElement("div");currPage.style.height="100%";var contentWrapper=document.createElement("div");setStyle(contentWrapper,config.style.panel);currPage.appendChild(contentWrapper);while(content.childNodes.length>0){var node=content.childNodes[0];content.removeChild(node);contentWrapper.appendChild(node)}var nextPage=document.createElement("div");nextPage.style.height="100%";carousel=new javaxt.dhtml.Carousel(content,{items:[currPage,nextPage],drag:false,loop:true,padding:config.padding,animationSteps:config.animationSteps,transitionEffect:"easeInOutCubic",fx:fx});carousel.beforeChange=function(currPanel,nextPanel){updateContent(nextPanel);var currDir=getDir(getPath(window.location.pathname));var currTab=me.getTab(currDir);for(var i=0;i<tabs.length;i++){tabs[i].div.className=""}currTab.div.className="active";dispatchEvent("beforeunload")};carousel.onChange=function(currPanel,prevPanel){var resizeSteps=0;if(config.animationSteps>0){resizeSteps=100}if(body.scrollTop>50){setTimeout(function(){var animationSteps=1000;scrollTop(new Date().getTime(),animationSteps,animationSteps,function(){resize(currPanel,resizeSteps)})},250)}else{body.scrollTop=0;resize(currPanel,resizeSteps)}prevPanel.innerHTML="";dispatchEvent("load")};window.addEventListener("resize",function(e){var panels=carousel.getPanels();for(var i=0;i<panels.length;i++){if(panels[i].isVisible){resize(panels[i].div);return}}});dispatchEvent("resize");window.addEventListener("popstate",popstateListener);log(window.history.state);if(window.history.state==null){slideIndex=0;var panelInfo={index:slideIndex,title:document.title};history.replaceState(panelInfo,null,"")}else{slideIndex=window.history.state.index}log("slideIndex: "+slideIndex)};var popstateListener=function(e){var panel=e.state;log(panel);document.title=panel.title;var nextPage;var panels=carousel.getPanels();for(var i=0;i<panels.length;i++){if(!panels[i].isVisible){nextPage=panels[i].div;break}}var url=window.location;getHTML(url,function(html,title,inlineScripts){nextPage.innerHTML=html;loadInlineScripts(inlineScripts);if(slideIndex>=panel.index){carousel.back();slideIndex=panel.index}else{if(slideIndex<panel.index){carousel.next();slideIndex=panel.index}else{log(slideIndex+" vs "+panel.index)}}})};this.enablePopstateListener=function(){me.disablePopstateListener();window.addEventListener("popstate",popstateListener)};this.disablePopstateListener=function(){window.removeEventListener("popstate",popstateListener)};this.beforeResize=function(){};this.onResize=function(){};var resize=function(panel,animationSteps){var r1=_getRect(panel.parentNode);var firstChild=getFirstChild(panel);if(firstChild){panel=firstChild}var r2=_getRect(panel);var h=r2.height+(r2.top-r1.top);if(h===parseInt(content.style.height)){return}else{me.beforeResize();if(!animationSteps){animationSteps=0}if(animationSteps>0){_resize(parseInt(content.style.height),h,new Date().getTime(),animationSteps,me.onResize())}else{content.style.height=h+"px";me.onResize()}}};var _resize=function(start,end,lastTick,timeLeft,animationSteps,callback){var curTick=new Date().getTime();var elapsedTicks=curTick-lastTick;if(timeLeft<=elapsedTicks){content.style.height=end+"px";if(callback){callback.apply(me,[])}return}timeLeft-=elapsedTicks;var d=start-end;var percentComplete=1-(timeLeft/animationSteps);var offset=Math.round(percentComplete*d);content.style.height=start-offset+"px";setTimeout(function(){_resize(start,end,curTick,timeLeft,animationSteps,callback)},33)};var scrollTop=function(lastTick,timeLeft,animationSteps,callback){var curTick=new Date().getTime();var elapsedTicks=curTick-lastTick;if(timeLeft<=elapsedTicks){body.scrollTop=0;if(callback){callback.apply(me,[])}return}timeLeft-=elapsedTicks;var start=body.scrollTop;var d=start;var percentComplete=1-(timeLeft/animationSteps);var offset=Math.round(percentComplete*d);body.scrollTop=start-offset;setTimeout(function(){scrollTop(curTick,timeLeft,animationSteps,callback)},33)};this.setContentHeight=function(h){content.style.height=h};var highlight=function(el){if(typeof SyntaxHighlighter!=="undefined"){var highlight=false;var nodes=el.getElementsByTagName("pre");for(var i=0;i<nodes.length;i++){var pre=nodes[i];if(pre.className==""){pre.className="brush: java;"}highlight=true}if(highlight){SyntaxHighlighter.highlight()}}};var parseLinks=function(links){for(var i=0;i<links.length;i++){if(links[i].hostname==window.location.hostname){var onclick=function(e){var url=this.href;if(window.location==url){e.preventDefault();return}var tmp=url.substring(url.indexOf(this.pathname)+this.pathname.length);if(tmp.indexOf("#")==0){e.preventDefault();return}var path=getPath(this.pathname);var dir=getDir(path);if(me.updateLink(url,path,dir)){e.preventDefault();getHTML(url,function(html,title,inlineScripts){load(html,title,url,dir,inlineScripts)})}};links[i].onclick=onclick}}};var load=function(html,title,url,dir,inlineScripts){var tab=me.getTab(dir);if(!tab){return}var currPath=getPath(window.location.pathname);var currDir=getDir(currPath);var currTab=me.getTab(currDir);document.title=title;history.pushState(null,title,url);var currPage,nextPage;var panels=carousel.getPanels();for(var i=0;i<panels.length;i++){var panel=panels[i];var el=panel.div;if(panel.isVisible){currPage=el}else{nextPage=el}}var slide=tab.dir!=currTab.dir;slide=true;if(!slide){currPage.innerHTML=html;updateContent(currPage)}else{nextPage.innerHTML=html;var a,b;for(var i=0;i<tabs.length;i++){var path=tabs[i].dir;if(path==currTab.dir){a=i}if(path==tab.dir){b=i}}log(a+" "+b);if(a==b){var path=getPath(window.location.pathname);if(path.indexOf(currPath)==0){b=1;a=0}else{log(currPath+" vs "+path)}}if(b>a){slideIndex++;carousel.next()}else{slideIndex--;carousel.back()}}loadInlineScripts(inlineScripts);var panelInfo={index:slideIndex,title:title};history.replaceState(panelInfo,title,url)};var loadInlineScripts=function(inlineScripts){for(var i=0;i<inlineScripts.length;i++){var script=inlineScripts[i].firstChild.nodeValue;eval(script)}};var dispatchEvent=function(name){var evt;try{evt=new Event(name)}catch(e){evt=document.createEvent("Event");evt.initEvent(name,false,false)}if(config.animationSteps>0){window.dispatchEvent(evt)}else{setTimeout(function(){window.dispatchEvent(evt)},50)}};me.getTabs=function(){return tabs};me.getTab=function(dir){for(var i=0;i<tabs.length;i++){if(tabs[i].dir==dir){return tabs[i]}}return null};this.updateLink=function(url,path,dir){if(dir=="downloads"||dir=="images"){var idx=path.lastIndexOf(".");if((path.length-idx)<5){return false}}return true};var updateContent=function(el){highlight(el);var links=el.getElementsByTagName("a");parseLinks(links)};var getPath=function(path){if(path==null){path=""}else{if(path.indexOf("/")==0){if(path.length>1){path=path.substring(1)}else{path=""}}}return path};var getDir=function(path){var dir=path.toLowerCase();var idx=dir.indexOf("/");if(idx>0){dir=dir.substring(0,idx)}return dir};var getHTML=function(url,callback){url+="";if(url.indexOf("?")==-1){url+="?"}else{url+="&"}url+="template=false";pageLoader.load(url,function(html,title,inlineScripts){var contentWrapper=document.createElement("div");setStyle(contentWrapper,config.style.panel);contentWrapper.innerHTML=html;html=contentWrapper.outerHTML;if(title==null||title.length==0){var h1=contentWrapper.getElementsByTagName("h1");if(h1.length>0){title=h1[0].innerHTML}}contentWrapper=null;if(callback){callback.apply(me,[html,title,inlineScripts])}})};var getFirstChild=function(panel){for(var i=0;i<panel.childNodes.length;i++){var node=panel.childNodes[i];if(node.nodeType===1){return node}}return null};var log=function(str){if(debug){console.log(str)}};var _getRect=javaxt.dhtml.utils.getRect;var merge=javaxt.dhtml.utils.merge;var setStyle=javaxt.dhtml.utils.setStyle;init()};
if(!javaxt){var javaxt={}}if(!javaxt.express){javaxt.express={}}javaxt.express.Alert=null;var alert=function(e){if(e==null){e=""}if(!(typeof(e)==="string"||e instanceof String)){if(typeof e.responseText!=="undefined"){e=(e.responseText.length>0?e.responseText:e.statusText);if(!e){e="Unknown Server Error"}}}var d=javaxt.express.Alert;if(!d){var a=document.getElementsByTagName("body")[0];var c=document.createElement("div");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.cursor="inherit";var b=document.createElement("div");b.style.width="100%";b.style.height="100%";b.style.position="absolute";b.style.overflowX="hidden";b.style.cursor="inherit";c.appendChild(b);d=javaxt.express.Alert=new javaxt.dhtml.Window(a,{width:450,height:200,valign:"top",modal:true,title:"Alert",body:c,style:{panel:"window",header:"window-header alert-header",title:"window-title",buttonBar:"window-header-button-bar",button:"window-header-button",body:"window-body alert-body"}});d.div=b}d.div.innerHTML=e;d.show()};
if(!javaxt){var javaxt={}}if(!javaxt.express){javaxt.express={}}javaxt.express.Confirm=null;var confirm=function(f,c){if(!(typeof(f)==="string"||f instanceof String)){c=f}javaxt.dhtml.utils.merge(c,{title:"Confirm",text:f});var e=javaxt.express.Confirm;if(!e){var a=document.getElementsByTagName("body")[0];var d=document.createElement("div");d.className="button-div";var b=function(i,g){var h=document.createElement("input");h.type="button";h.className="form-button";h.onclick=function(){e.result=this.result;e.close()};h.setLabel=function(j){if(j){this.name=this.value=j}};h.setValue=function(j){if(j===true||j===false){this.result=j}};h.update=function(j){if(j){this.setLabel(j.label);this.setValue(j.value)}};h.setLabel(i);h.setValue(g);d.appendChild(h);return h};e=javaxt.express.Confirm=new javaxt.dhtml.Window(a,{width:450,height:150,valign:"top",modal:true,footer:d,style:{panel:"window",header:"window-header",title:"window-title",buttonBar:"window-header-button-bar",button:"window-header-button",body:"window-body confirm-body"}});e.leftButton=b("OK",true);e.rightButton=b("Cancel",false)}e.setTitle(c.title);e.setContent(c.text.replace("\n","<p></p>"));e.leftButton.update(c.leftButton);e.rightButton.update(c.rightButton);e.result=false;e.onClose=function(){var g=c.callback;if(g){g.apply(e,[e.result])}};e.show();return false};
if(!javaxt)var javaxt={};if(!javaxt.express)javaxt.express={};javaxt.express.DBView=function(parent,config){this.className="javaxt.express.DBView";var me=this;var tree,editor,grid,gridContainer,waitmask;var runButton,cancelButton;var jobID;var defaultConfig={queryLanguage:"sql",queryService:"sql/job/",getTables:"sql/tables/",pageSize:50,style:{container:{width:"100%",height:"100%",},leftPanel:{backgroundColor:"#272a31",borderRight:"1px solid #383b41",color:"#bfc0c3"},bottomPanel:{backgroundColor:"#e4e4e4",borderTop:"1px solid #b5b5b5"},toolbar:"panel-toolbar",toolbarButton:{},toolbarIcons:{run:"runIcon",cancel:"deleteIcon"},editor:{height:"240px",},table:{},tree:{padding:"7px 0 7px 0px",backgroundColor:"",li:"tree-node"}},onTreeClick:function(item){editor.setValue("select * from "+item.name);}};var border="1px solid #383b41";var init=function(){if(typeof parent==="string"){parent=document.getElementById(parent);}
if(!parent)return;config=clone(config);config=merge(config,defaultConfig);waitmask=config.waitmask;var div=document.createElement('div');setStyle(div,config.style.container);var table=createTable();var tbody=table.firstChild;var tr=document.createElement('tr');tbody.appendChild(tr);var td;var td=document.createElement('td');setStyle(td,config.style.leftPanel);td.style.height="100%";tr.appendChild(td);var target=createTableView(td);td=document.createElement('td');td.style.height="100%";td.style.width="100%";tr.appendChild(td);var hr=addHorizontalResizer(td,target);createQueryView(hr);div.appendChild(table);parent.appendChild(div);me.el=div;onRender(me.el,function(){if(waitmask)waitmask.show();var getTables=config.getTables;if(typeof getTables==="string"){get(getTables,{success:function(text){if(waitmask)waitmask.hide();var tables=JSON.parse(text).tables;tree.addNodes(tables);},failure:function(request){if(waitmask)waitmask.hide();alert(request);}});}
else if(typeof getTables==="function"){getTables.apply(me,[tree]);}});};this.setQuery=function(query){if(query){if(query===editor.getValue()){}
else{editor.setValue(query);me.clearResults();}}
else{me.clear();}};this.getQuery=function(){return editor.getValue();};this.executeQuery=function(){cancel();if(waitmask)waitmask.show();me.clearResults();grid=null;var url=config.queryService;var payload={query:editor.getValue(),limit:config.pageSize};getResponse(url,JSON.stringify(payload),function(request){cancelButton.disable();var json=JSON.parse(request.responseText);var data=parseResponse(json);render(data.records,data.columns);if(waitmask)waitmask.hide();});};this.clear=function(){editor.setValue("");me.clearResults();};this.clearResults=function(){if(grid)grid.clear();gridContainer.innerHTML="";};this.getComponents=function(){return{tree:tree,grid:grid,editor:editor};};var createTableView=function(parent){var outerDiv=document.createElement("div");outerDiv.style.position="relative";outerDiv.style.height="100%";outerDiv.style.width="210px";outerDiv.style.overflow="auto";parent.appendChild(outerDiv);var div=document.createElement('div');div.style.position="absolute";div.style.width="100%";outerDiv.appendChild(div);tree=new javaxt.dhtml.Tree(div,{style:config.style.tree});tree.onClick=function(item){config.onTreeClick.apply(me,[item]);};return outerDiv;};var createQueryView=function(parent){var table=createTable();var tbody=table.firstChild;var tr,td;tr=document.createElement('tr');tbody.appendChild(tr);td=document.createElement('td');tr.appendChild(td);setStyle(td,config.style.toolbar);addButtons(td);tr=document.createElement('tr');tbody.appendChild(tr);td=document.createElement('td');td.style.borderBottom=border;tr.appendChild(td);setStyle(td,config.style.editor);var target=td;if(typeof CodeMirror!=='undefined'){var outerDiv=document.createElement("div");outerDiv.style.height="100%";outerDiv.style.position="relative";td.appendChild(outerDiv);var innerDiv=document.createElement("div");innerDiv.style.width="100%";innerDiv.style.height="100%";innerDiv.style.position="absolute";innerDiv.style.overflow="hidden";innerDiv.style.overflowX="auto";outerDiv.appendChild(innerDiv);editor=CodeMirror(innerDiv,{value:"",mode:config.queryLanguage,lineNumbers:true,indentUnit:4});td.childNodes[0].style.height="100%";editor.setValue=function(str){var doc=this.getDoc();doc.setValue(str);doc.clearHistory();var cm=this;setTimeout(function(){cm.refresh();},200);};editor.getValue=function(){return this.getDoc().getValue();};}
else{editor=document.createElement('textarea');editor.style.height="100%";editor.style.width="100%";editor.style.resize="none";td.appendChild(editor);editor.getValue=function(){return this.value;};editor.setValue=function(str){this.value=str;};}
tr=document.createElement('tr');tbody.appendChild(tr);td=document.createElement('td');setStyle(td,config.style.bottomPanel);td.style.height="100%";td.style.verticalAlign="top";tr.appendChild(td);addVerticalResizer(td,target);gridContainer=document.createElement("div");gridContainer.style.height="100%";td.appendChild(gridContainer);parent.appendChild(table);};var addVerticalResizer=function(parent,target){var div=document.createElement("div");div.style.position="relative";var resizeHandle=document.createElement("div");resizeHandle.style.position="absolute";resizeHandle.style.width="100%";resizeHandle.style.height="10px";resizeHandle.style.top="-5px";resizeHandle.style.cursor="ns-resize";resizeHandle.style.zIndex=2;div.appendChild(resizeHandle);parent.appendChild(div);javaxt.dhtml.utils.initDrag(resizeHandle,{onDragStart:function(x,y){var div=this;div.yOffset=y;div.initialHeight=target.offsetHeight;},onDrag:function(x,y){var div=this;var top=(div.yOffset-y);var height=div.initialHeight-top;target.style.height=height+"px";},onDragEnd:function(){}});};var addHorizontalResizer=function(parent,target){var div=document.createElement("div");div.style.position="relative";div.style.height="100%";var resizeHandle=document.createElement("div");resizeHandle.style.position="absolute";resizeHandle.style.height="100%";resizeHandle.style.width="10px";resizeHandle.style.left="-5px";resizeHandle.style.cursor="ew-resize";resizeHandle.style.zIndex=2;div.appendChild(resizeHandle);parent.appendChild(div);javaxt.dhtml.utils.initDrag(resizeHandle,{onDragStart:function(x,y){var div=this;div.xOffset=x;div.initialWidth=target.offsetWidth;},onDrag:function(x,y){var div=this;var left=(div.xOffset-x);var width=div.initialWidth-left;target.style.width=width+"px";},onDragEnd:function(){}});return div;};var addButtons=function(toolbar){runButton=createButton(toolbar,{label:"Run",icon:config.style.toolbarIcons.run,disabled:false});runButton.onClick=function(){me.executeQuery();};cancelButton=createButton(toolbar,{label:"Cancel",icon:config.style.toolbarIcons.cancel,disabled:true});cancelButton.onClick=function(){cancel(function(){if(waitmask)waitmask.hide();});};};var cancel=function(callback){if(jobID){javaxt.dhtml.utils.delete(config.queryService+jobID,{success:function(){cancelButton.disable();if(callback)callback.apply(null,[]);},failure:function(request){cancelButton.disable();if(callback)callback.apply(null,[]);if(request.status!==404){showError(request);}}});}
else{if(callback)callback.apply(null,[]);}
jobID=null;};var showError=function(msg){cancelButton.disable();if(msg.responseText){msg=(msg.responseText.length>0?msg.responseText:msg.statusText);}
gridContainer.innerHTML=msg;if(waitmask)waitmask.hide();};var getResponse=function(url,payload,callback){post(url,payload,{success:function(text){jobID=JSON.parse(text).job_id;cancelButton.enable();var timer;var checkStatus=function(){if(jobID){var request=get(config.queryService+jobID,{success:function(text){if(text==="pending"||text==="running"){timer=setTimeout(checkStatus,250);}
else{clearTimeout(timer);callback.apply(me,[request]);}},failure:function(response){clearTimeout(timer);showError(response);}});}
else{clearTimeout(timer);}};timer=setTimeout(checkStatus,250);},failure:function(response){showError(response);}});};var parseResponse=function(json){var rows=json.rows;var record=rows[0];var columns=[];for(var key in record){if(record.hasOwnProperty(key)){columns.push(key);}}
var records=[];for(var i=0;i<rows.length;i++){var record=[];var row=rows[i];for(var j=0;j<columns.length;j++){var key=columns[j];var val=row[key];record.push(val);}
records.push(record);}
return{columns:columns,records:records};};var render=function(records,columns){var widths=[];var totalWidth=0;var headerWidth=0;var pixelsPerChar=10;if(columns.length>1){for(var i=0;i<columns.length;i++){var len=0;var column=columns[i];if(column!=null)len=(rec+"").length*pixelsPerChar;widths.push(len);headerWidth+=len;}
for(var i=0;i<records.length;i++){var record=records[i];for(var j=0;j<record.length;j++){var rec=record[j];var len=0;if(rec!=null){var str=rec+"";var r=str.indexOf("\r");var n=str.indexOf("\n");if(r==-1){if(n>-1)str=str.substring(n);}
else{if(n>-1){str=str.substring(Math.min(r,n));}
else str=str.substring(r);}
len=Math.min(str.length*pixelsPerChar,150);}
widths[j]=Math.max(widths[j],len);}}
for(var i=0;i<widths.length;i++){totalWidth+=widths[i];}}
else{widths.push(1);totalWidth=1;}
var arr=[];for(var i=0;i<columns.length;i++){var colWidth=((widths[i]/totalWidth)*100)+"%";arr.push({header:columns[i],width:colWidth,sortable:false});}
var outerDiv=document.createElement("div");outerDiv.style.height="100%";outerDiv.style.position="relative";gridContainer.appendChild(outerDiv);var innerDiv=document.createElement("div");innerDiv.style.width="100%";innerDiv.style.height="100%";innerDiv.style.position="absolute";innerDiv.style.overflow="hidden";innerDiv.style.overflowX="auto";outerDiv.appendChild(innerDiv);var overflowDiv=document.createElement("div");overflowDiv.style.width="100%";overflowDiv.style.height="100%";overflowDiv.style.position="absolute";innerDiv.appendChild(overflowDiv);onRender(innerDiv,function(){var rect=javaxt.dhtml.utils.getRect(innerDiv);if(rect.width<headerWidth){overflowDiv.style.width=headerWidth+"px";}});grid=new javaxt.dhtml.DataGrid(overflowDiv,{columns:arr,style:config.style.table,url:config.queryService,payload:JSON.stringify({query:editor.getValue()}),limit:config.pageSize,getResponse:getResponse,parseResponse:function(request){return parseResponse(JSON.parse(request.responseText)).records;}});grid.beforeLoad=function(page){};grid.afterLoad=function(){cancelButton.disable();};grid.onSelectionChange=function(){};grid.getColumns=function(){return columns;};grid.getConfig=function(){return{columns:arr};};grid.load(records,1);};var createButton=function(toolbar,btn){btn.style=JSON.parse(JSON.stringify(config.style.toolbarButton));if(btn.icon){btn.style.icon="toolbar-button-icon "+btn.icon;delete btn.icon;}
if(btn.menu===true){btn.style.arrow="toolbar-button-menu-icon";btn.style.menu="menu-panel";btn.style.select="panel-toolbar-menubutton-selected";}
return new javaxt.dhtml.Button(toolbar,btn);};var get=javaxt.dhtml.utils.get;var post=javaxt.dhtml.utils.post;var del=javaxt.dhtml.utils.delete;var clone=javaxt.dhtml.utils.clone;var merge=javaxt.dhtml.utils.merge;var onRender=javaxt.dhtml.utils.onRender;var setStyle=javaxt.dhtml.utils.setStyle;var createTable=javaxt.dhtml.utils.createTable;init();};
if(!javaxt){var javaxt={}}if(!javaxt.express){javaxt.express={}}javaxt.express.Facet=function(g,a){this.className="javaxt.express.Facet";var e=this;var c;var i=0;var b={title:"Title",style:{panel:{backgroundColor:"#e1f2ff",marginBottom:"8px"},header:{backgroundColor:"#b0d4f3",color:"#003a92",padding:"4px 8px"},body:{padding:"4px 8px"},label:{fontSize:"12px",color:"#3e3e3e",whiteSpace:"nowrap",cursor:"pointer",padding:"1px 0 0 5px"},checkbox:{width:"13px",height:"13px",border:"1px solid #cccccc",borderRadius:"3px",background:"#F6F6F6",cursor:"pointer",margin:"0px",color:"#2b2b2b"},checkmark:{content:"",display:"block",width:"4px",height:"7px",border:"solid #ffffff",borderWidth:"0 2px 2px 0",transform:"rotate(45deg)",margin:"1px 0 0 4px"}},sort:{field:"name",direction:"desc"}};var h=function(){if(typeof g==="string"){g=document.getElementById(g)}if(!g){return}a=f(a,b);if(!a.filter){a.filter={}}if(!a.key){a.key=a.title}var k=document.createElement("div");d(k,a.style.panel);var j=document.createElement("div");d(j,a.style.header);if(typeof a.title==="string"){j.innerHTML=a.title}else{j.appendChild(a.title)}k.appendChild(j);c=document.createElement("div");d(c,a.style.body);k.appendChild(c);g.appendChild(k)};this.onChange=function(){};this.getTitle=function(){return a.title};this.getKey=function(){return a.key};this.clear=function(){c.innerHTML=""};this.getBody=function(){return c};this.getNumOptions=function(){return i};this.update=function(m){e.clear();var k=a.getLabel;var n=a.key;var o=[];for(var x in m){if(m.hasOwnProperty(x)){o.push({label:x,count:m[x]})}}i=o.length;if(a.sort){var s=a.sort.field;var t=a.sort.direction;if(s=="name"){if(t==null){t="asc"}o.sort(function(B,A){var z=B.label.toLowerCase();var C=A.label.toLowerCase();if(t=="desc"){if(z<C){return 1}if(z>C){return -1}}else{if(z<C){return -1}if(z>C){return 1}}return 0})}else{if(s=="count"){if(t==null){t="desc"}o.sort(function(B,A){var z=B.count;var C=A.count;if(t=="desc"){if(z<C){return 1}if(z>C){return -1}}else{if(z<C){return -1}if(z>C){return 1}}return 0})}}}var m=o;for(var w=0;w<m.length;w++){var v=m[w];var q=v.count;var r=v.label;if(k){r=k(r)}var u=false;if(a.filter[n]){var o=a.filter[n].split(",");for(var l=0;l<o.length;l++){if(o[l]==v.label+""){u=true;break}}}var j=document.createElement("div");var p=new javaxt.dhtml.Checkbox(j,{label:r+" ("+q+")",value:v.label,checked:u,display:"table",style:{label:a.style.label,box:a.style.checkbox,check:a.style.checkmark}});p.filterName=n;p.onClick=function(C){var B=this.filterName;var F=this.getValue()+"";var E=a.filter[B];if(C){if(E){var A=true;var y=E.split(",");for(var z=0;z<y.length;z++){if(y[z]==F){A=false;break}}if(A){a.filter[B]+=","+F}}else{a.filter[B]=F}}else{if(E){var D="";var y=E.split(",");for(var z=0;z<y.length;z++){if(y[z]!=F){if(D.length>0){D+=","}D+=y[z]}}if(D.length>0){a.filter[B]=D}else{delete a.filter[B]}}}e.onChange(a.filter[B])};c.appendChild(j)}};var f=javaxt.dhtml.utils.merge;var d=javaxt.dhtml.utils.setStyle;h()};
if(!javaxt)var javaxt={};if(!javaxt.express)javaxt.express={};javaxt.express.FileBrowser=function(parent,config){this.className="javaxt.express.FileBrowser";var me=this;var win,grid,addressBar;var button={};var params={};var history=[];var currDir;var pathSeparator="\\";var totalCount=0;var totalSize=0;var defaultConfig={fileService:"files/",pageSize:300,foldersOnly:false,title:null,width:600,height:450,modal:true,closable:true,footer:null,columns:[{header:"Name",field:"name",width:"100%",sortable:true},{header:"Date",field:"date",width:"125px",align:"left",sortable:true},{header:"Type",field:"type",width:"100px",sortable:true},{header:"Size",field:"size",width:"80px",align:"right",sortable:true}],style:{panel:"window",header:"window-header",button:"window-header-button",title:"window-title",body:{padding:"0px",verticalAlign:"top"},toolbar:"panel-toolbar",toolbarButton:{},toolbarIcons:{back:"backIcon",forward:"nextIcon",up:"upIcon",refresh:"refreshIcon"},addressBar:"form-input",addressBarItem:{},leftPanel:{background:"#272a31",borderRight:"1px solid #383b41"},tree:{padding:"7px 0 7px 0px",backgroundColor:"",li:"tree-node"},centerPanel:{width:"100%",height:"100%",background:"#fff"},table:{},info:{height:"20px"}},renderers:{iconRenderer:null,nameRenderer:null,dateRenderer:null,typeRenderer:null,sizeRenderer:null}};var init=function(){if(typeof parent==="string"){parent=document.getElementById(parent);}
if(!parent)return;config=clone(config);config=merge(config,defaultConfig);var table=createTable();var tbody=table.firstChild;var tr,td;tr=document.createElement("tr");tbody.appendChild(tr);td=document.createElement("td");tr.appendChild(td);createHeader(td);tr=document.createElement("tr");tbody.appendChild(tr);td=document.createElement("td");td.style.height="100%";tr.appendChild(td);createBody(td);config.body=table;win=new javaxt.dhtml.Window(parent,config);for(var m in win){if(typeof win[m]=="function"){if(me[m]==null)me[m]=win[m];}}};this.setDirectory=function(path){grid.clear();if(path==null)path="";else path=path.trim();if(path.length==0){button.up.disable();}
else{button.up.enable();}
params.path=path;params.hidden=false;params.foldersOnly=config.foldersOnly;grid.load();history.push(path);addressBar.update(path);};this.getDirectory=function(){var path=params.path;if(path.length>0){var s="/";if(path.indexOf("\\")>-1)s="\\";if(path.substring(path.length-1)!=s)path+=s;}
return path;};this.setSort=function(col,dir){var filter=grid.getFilter();if(!col)delete filter.orderby;else{if(!dir)dir="";filter.orderby=col+" "+dir;}
grid.setFilter(filter);};this.onClick=function(item,path,row,e){};this.onDoubleClick=function(item,path,row,e){};this.getSelectedItems=function(){var arr=grid.getSelectedRecords();for(var i=0;i<arr.length;i++){arr[i]=parseRecord(arr[i]);}
return arr;};var createHeader=function(parent){setStyle(parent,config.style.toolbar);var table=createTable();var tbody=table.firstChild;var tr,td;tr=document.createElement("tr");tbody.appendChild(tr);td=document.createElement("td");tr.appendChild(td);createToolbar(td);td=document.createElement("td");td.style.width="100%";tr.appendChild(td);createAddressBar(td);parent.appendChild(table);};var createToolbar=function(parent){var table=createTable();var tbody=table.firstChild;var tr,td;tr=document.createElement("tr");tbody.appendChild(tr);td=document.createElement("td");tr.appendChild(td);var backButton=createButton(td,{label:"",icon:config.style.toolbarIcons.back,disabled:true});backButton.onClick=function(){};td=document.createElement("td");tr.appendChild(td);var forwardButton=createButton(td,{label:"",icon:config.style.toolbarIcons.forward,disabled:true});forwardButton.onClick=function(){};td=document.createElement("td");tr.appendChild(td);var upButton=createButton(td,{label:"",icon:config.style.toolbarIcons.up,disabled:true});upButton.onClick=function(){if(!currDir)return;if(currDir.length===0)return;var str=getPath(currDir,true);var idx=str.lastIndexOf("/");var path=currDir.substring(0,idx+1);if(getPath(path).indexOf("/")>-1){me.setDirectory(path);}
else{me.setDirectory("");}};button.up=upButton;parent.appendChild(table);};var createAddressBar=function(parent){var table=createTable();var tbody=table.firstChild;var tr,td;tr=document.createElement("tr");tbody.appendChild(tr);td=document.createElement("td");td.style.width="100%";tr.appendChild(td);var div=document.createElement("div");setStyle(div,config.style.addressBar);div.style.position="relative";div.style.width="100%";td.appendChild(div);var outerDiv=document.createElement("div");outerDiv.style.position="absolute";outerDiv.style.width="100%";outerDiv.style.height="100%";outerDiv.style.overflow="hidden";outerDiv.style.whiteSpace="nowrap";div.appendChild(outerDiv);var innerDiv=document.createElement("div");innerDiv.style.position="absolute";innerDiv.style.height="100%";innerDiv.style.overflow="hidden";innerDiv.style.whiteSpace="nowrap";outerDiv.appendChild(innerDiv);addressBar={clear:function(){innerDiv.innerHTML="";},update:function(path){innerDiv.innerHTML="";path=getPath(path,true);if(path.length==0)return;var arr=path.split("/");for(var i=0;i<arr.length;i++){var div=document.createElement("div");setStyle(div,config.style.addressBarItem);div.style.display="inline-block";div.innerHTML=arr[i]+pathSeparator;innerDiv.appendChild(div);outerDiv.scrollLeft=innerDiv.clientWidth;div.onclick=function(){var path="";for(var i=0;i<innerDiv.childNodes.length;i++){var div=innerDiv.childNodes[i];path+=div.innerHTML;if(div==this)break;}
if(path!=getPath(currDir,true)){me.setDirectory(path);}};}}};td=document.createElement("td");tr.appendChild(td);var refreshButton=createButton(td,{label:"",icon:config.style.toolbarIcons.refresh,disabled:false});refreshButton.onClick=function(){grid.refresh();};parent.appendChild(table);};var createBody=function(parent){var table=createTable();var tbody=table.firstChild;var tr,td;tr=document.createElement("tr");tbody.appendChild(tr);td=document.createElement("td");tr.appendChild(td);createNav(td);td=document.createElement("td");td.style.width="100%";tr.appendChild(td);createGrid(td);parent.appendChild(table);};var createNav=function(parent){};var createGrid=function(parent){var table=createTable();var tbody=table.firstChild;var tr,td;tr=document.createElement("tr");tbody.appendChild(tr);td=document.createElement("td");setStyle(td,config.style.centerPanel);tr.appendChild(td);var columns=config.columns;if(typeof IScroll!=='undefined'){columns.push({header:"",width:"10px",sortable:false});}
grid=new javaxt.dhtml.DataGrid(td,{columns:columns,style:config.style.table,url:config.fileService,limit:config.pageSize,getResponse:function(url,payload,callback){post(url,JSON.stringify(params),{success:function(txt,xml,url,req){callback.apply(me,[req]);},failure:function(req){alert(req);}});},parseResponse:function(request){var data=JSON.parse(request.responseText);currDir=data.dir;pathSeparator=data.pathSeparator;totalCount=data.count;totalSize=data.size;return data.items;},update:function(row,record){var item=parseRecord(record);row.set("Name",getItem(item));row.set("Date",getDate(item));row.set("Type",getType(item));row.set("Size",getSize(item));}});tr=document.createElement("tr");tbody.appendChild(tr);td=document.createElement("td");setStyle(td,config.style.info);tr.appendChild(td);var countInfo=document.createElement("div");countInfo.style.display="inline-block";td.appendChild(countInfo);var sizeInfo=document.createElement("div");sizeInfo.style.display="inline-block";sizeInfo.style.marginLeft="7px";td.appendChild(sizeInfo);grid.beforeLoad=function(page){me.onSelectionChange();countInfo.innerHTML="";sizeInfo.innerHTML="";};grid.onLoad=function(){countInfo.innerHTML=totalCount+" items";if(totalSize>0)sizeInfo.innerHTML=formatSize(totalSize);};grid.onSelectionChange=function(){me.onSelectionChange();};grid.onRowClick=function(row,e){var item=parseRecord(row.record);var path;if(currDir)path=currDir+item.name;else path=item.name;if(e.detail===2){me.onDoubleClick(item,path,row,e);}
else{me.onClick(item,path,row,e);}};parent.appendChild(table);};var parseRecord=function(record){return{name:record[0],type:record[1],date:new Date(record[2]),size:record[3]};};var getName=function(item){return render(item,'name',function(){return item.name;});};var getIcon=function(item){return render(item,'icon',function(){return null;});};var getItem=function(item){var name=getName(item);var icon=getIcon(item);if(icon){var outerDiv=document.createElement("div");var div=document.createElement("div");div.style.display="inline-block";outerDiv.appendChild(div);setContent(icon,div);var div=document.createElement("div");div.style.display="inline-block";outerDiv.appendChild(div);setContent(name,div);return outerDiv;}
else{return name;}};var setContent=function(content,el){if(content==null||typeof content==="undefined"){el.innerHTML="";}
else{if(typeof content==="string"||!isNaN(parseFloat(content))){el.innerHTML=content;}
else{el.innerHTML="";try{el.appendChild(content);}
catch(e){}}}};var getDate=function(item){return render(item,'date',function(){var date=item.date;if(item.type=="Drive"){return"";}
else{return formatDate(date);}});};var getSize=function(item){return render(item,'size',function(){var size=item.size;if(item.type=="Folder"||item.type=="Drive"){return"";}
else{return formatSize(size);}});};var getType=function(item){return render(item,'type',function(){return item.type;});};var formatSize=function(size){if(size>0){size=size/1024;if(size<=1)size="1 KB";else{size=size/1024;if(size<=1)size="1 MB";else{size=Math.round(size)+" MB";}}}
return size;};var formatDate=function(date){var hour=date.getHours();if(hour==0)hour=12;else{if(hour>12)hour=hour-12;}
var m=(date.getHours()<12)?"AM":"PM";var minutes=date.getMinutes();if(minutes<10)minutes="0"+minutes;return(date.getMonth()+1)+"/"+date.getDate()+"/"+date.getFullYear()+" "+hour+":"+minutes+" "+m;};var createThumbnails=function(parent){};var getPath=function(str,trim){str=str.replace(/\\/g,'/');if(trim===true){if(str.substring(str.length-1)==="/"){str=str.substring(0,str.length-1);}}
return str;};var render=function(item,renderer,fn){var key=renderer+"Renderer";if(config.renderers[key])return config.renderers[key](item);else return fn.call();};var createButton=function(toolbar,btn){btn.style=JSON.parse(JSON.stringify(config.style.toolbarButton));if(btn.icon){btn.style.icon="toolbar-button-icon "+btn.icon;delete btn.icon;}
return new javaxt.dhtml.Button(toolbar,btn);};var post=javaxt.dhtml.utils.post;var del=javaxt.dhtml.utils.delete;var clone=javaxt.dhtml.utils.clone;var merge=javaxt.dhtml.utils.merge;var setStyle=javaxt.dhtml.utils.setStyle;var createTable=javaxt.dhtml.utils.createTable;init();};
if(!javaxt){var javaxt={}}if(!javaxt.express){javaxt.express={}}javaxt.express.FileUploader=function(m,c){this.className="javaxt.express.FileUploader";var j=this;var h;var e={uploadService:"upload",maxUploads:1,title:"File Upload",width:600,height:450,modal:true,closable:true,footer:null,style:{panel:"window",header:"window-header",button:"window-header-button",title:"window-title",body:"window-body",uploadArea:{border:"2px dashed #bbb",borderRadius:"5px",padding:"25px",margin:"25px",textAlign:"center",fontSize:"20pt",fontWeight:"bold",color:"#bbb",backgroundColor:"#f8f8f8",height:"200px"},centerPanel:{width:"100%",height:"100%",background:"#fff"},table:{},info:{height:"20px"}},renderers:{}};var o=function(){if(typeof m==="string"){m=document.getElementById(m)}if(!m){return}c=i(c);c=k(c,e);var r=l();var q=r.firstChild;var s,t;s=document.createElement("tr");q.appendChild(s);t=document.createElement("td");s.appendChild(t);b(t);s=document.createElement("tr");q.appendChild(s);t=document.createElement("td");s.appendChild(t);c.body=r;h=new javaxt.dhtml.Window(m,c);for(var p in h){if(typeof h[p]=="function"){if(j[p]==null){j[p]=h[p]}}}j.el=h.el;j.el.addEventListener("dragover",f,false);j.el.addEventListener("drop",function(v){v.stopPropagation();v.preventDefault();var u=v.dataTransfer.files;j.upload(u)},false)};this.accept=function(p){return true};this.upload=function(v){var r=[];for(var u=0;u<v.length;u++){var t=v[u];if(j.accept(t)===true){r.push(t)}}var q=0;var p=r.length;var s=function(){if(r.length==0){return}var w=r.shift();var x=new FormData();x.append(w.name,w);n(c.uploadService,x,{success:function(y){q++;s()},failure:function(y){q++;s()}})};s()};var b=function(q){var t=document.createElement("div");g(t,c.style.uploadArea);q.appendChild(t);var p=document.createElement("input");p.type="file";p.style.display="none";p.onchange=function(){j.upload(this.files)};t.appendChild(p);var s=document.createElement("span");s.innerHTML="Drag and drop files or ";t.appendChild(s);var r=document.createElement("a");r.href="#";r.innerHTML="browse";r.onclick=function(u){u.preventDefault();p.click()};t.appendChild(r)};var f=function(p){p.stopPropagation();p.preventDefault();p.dataTransfer.dropEffect="copy"};var a=function(q){var r=l();var p=r.firstChild;var s,t;s=document.createElement("tr");p.appendChild(s);t=document.createElement("td");s.appendChild(t);createNav(t);t=document.createElement("td");t.style.width="100%";s.appendChild(t);createGrid(t);q.appendChild(r)};var d=function(q,p){if(q==null||typeof q==="undefined"){p.innerHTML=""}else{if(typeof q==="string"||!isNaN(parseFloat(q))){p.innerHTML=q}else{p.innerHTML="";try{p.appendChild(q)}catch(r){}}}};var n=javaxt.dhtml.utils.post;var i=javaxt.dhtml.utils.clone;var k=javaxt.dhtml.utils.merge;var g=javaxt.dhtml.utils.setStyle;var l=javaxt.dhtml.utils.createTable;o()};
if(!javaxt){var javaxt={}}if(!javaxt.express){javaxt.express={}}javaxt.express.Spinner=function(c,b){var d=this;var a={style:"spinner",size:"25px",lineWidth:6};var e=function(){if(typeof c==="string"){c=document.getElementById(c)}if(!c){return}var k={};f(k,b);f(k,a);b=k;b.size=parseInt(b.size)+"px";b.lineWidth=parseInt(b.lineWidth)+"";var j=document.createElement("div");j.className=b.style;j.style.width=b.size;j.style.height=b.size;j.style.display="inline-block";var h="http://www.w3.org/2000/svg";var g=document.createElementNS(h,"svg");g.setAttribute("width",b.size);g.setAttribute("height",b.size);g.setAttribute("viewBox","0 0 66 66");j.appendChild(g);var i=document.createElementNS(h,"circle");i.setAttribute("fill","none");i.setAttribute("stroke-width",b.lineWidth);i.setAttribute("stroke-linecap","round");i.setAttribute("cx","33");i.setAttribute("cy","33");i.setAttribute("r","30");g.appendChild(i);c.appendChild(j);d.el=j};this.show=function(){setTimeout(function(){d.el.style.display="";d.el.style.opacity=1;d.el.childNodes[0].style.opacity=1},50)};this.hide=function(){d.el.style.opacity=0;d.el.childNodes[0].style.opacity=0;setTimeout(function(){d.el.style.display="none"},500)};var f=javaxt.dhtml.utils.merge;e()};
if(!javaxt){var javaxt={}}if(!javaxt.express){javaxt.express={}}javaxt.express.WaitMask=function(l,e){var i=this;var g,m;var c,d;var h=false;var f={style:{mask:"waitmask",spinner:{size:"50px",lineWidth:3}}};var n=function(){if(typeof l==="string"){l=document.getElementById(l)}if(!l){return}var o={};j(o,e);j(o,f);e=o;g=document.createElement("div");g.className=e.style.mask;g.style.opacity=0;b(g);g.hide();l.appendChild(g);i.el=g};this.show=function(o){if(h){return}o=parseInt(o);if(c){clearTimeout(c)}if(!isNaN(o)&&o>0){c=setTimeout(k,o)}else{k()}};var k=function(){g.style.zIndex=a();g.show();g.style.opacity="";g.innerHTML="";m=new javaxt.express.Spinner(g,e.style.spinner);m.show();h=true};this.hide=function(){if(c){clearTimeout(c)}g.style.zIndex="";g.style.opacity=0;d=setTimeout(function(){g.hide();g.innerHTML="";h=false},1500)};var j=javaxt.dhtml.utils.merge;var b=javaxt.dhtml.utils.addShowHide;var a=javaxt.dhtml.utils.getNextHighestZindex;n()};